<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.15">
  <compounddef id="d3/d90/tripal_8terms_8api_8inc" kind="file" language="PHP">
    <compoundname>tripal.terms.api.inc</compoundname>
      <sectiondef kind="func">
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1gacbd2948d7bec249c6a8143f2d4046d0f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_add_term</definition>
        <argsstring>($details)</argsstring>
        <name>hook_vocab_add_term</name>
        <param>
          <declname>$details</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Hook used by the default term storage backend to add new terms.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$details</parametername>
</parameternamelist>
<parameterdescription>
<para>An array with at least the following keys: -vocabulary : An associative array with the following keys: -name: The short name for the vocabulary (e.g. SO, PATO, etc). -description: The description of this vocabulary. -url: The URL for the vocabulary. -urlprefix: (optional) A URL to which the short_name and term accession can be appended to form a complete URL for a term. If the prefix does not support appending then the exact location for the position of the short_name and the term accession will be specified with the {db} and {accession} tags respectively. -accession : The name unique ID of the term. -url : The URL for the term. -name : The name of the term. -definition : The term&apos;s description. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>TRUE if the term was added, FALSE otherwise. If the term already exists it will be updated and the return value will be TRUE. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="306" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="306" bodyend="308"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1ga306a347a421d610f1f958d5b45e70634" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_get_root_terms</definition>
        <argsstring>($vocabulary)</argsstring>
        <name>hook_vocab_get_root_terms</name>
        <param>
          <declname>$vocabulary</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Hook used by the default term storage backend to provide root terms.</para><para>This hook is called by the tripal_entity module to retrieve a list of root terms for a given vocabulary from the storage backend. It must return an array of terms where each term contains the same structure as that of the <ref refid="de/d00/group__tripal__terms__api_1gaba7a1f6fa6f1a3be438a77ce875f7fef" kindref="member">hook_vocab_get_term()</ref>.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$vocabulary</parametername>
</parameternamelist>
<parameterdescription>
<para>The vocabulary of the vocabulary in which the term is found.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>An array of root terms where each term contains the same structure as that of the <ref refid="de/d00/group__tripal__terms__api_1gaba7a1f6fa6f1a3be438a77ce875f7fef" kindref="member">hook_vocab_get_term()</ref>, or an empty array if no children are present. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="236" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="236" bodyend="238"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1gaba7a1f6fa6f1a3be438a77ce875f7fef" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_get_term</definition>
        <argsstring>($vocabulary, $accession)</argsstring>
        <name>hook_vocab_get_term</name>
        <param>
          <declname>$vocabulary</declname>
        </param>
        <param>
          <declname>$accession</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Hook used by the default term storage backend to provide details for a term.</para><para>This hook is called by the tripal_entity module to retrieve information about the term from the storage backend. It must return an array with a set of keys.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$vocabulary</parametername>
</parameternamelist>
<parameterdescription>
<para>The vocabulary of the vocabulary in which the term is found. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$accession</parametername>
</parameternamelist>
<parameterdescription>
<para>The unique identifier (accession) for this term.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>An array with at least the following keys: -vocabulary : An associative array with the following keys: -name: The short name for the vocabulary (e.g. SO, PATO, etc). -description: The description of this vocabulary. -url: The URL for the vocabulary. -urlprefix : (optional) A URL to which the short_name and term accession can be appended to form a complete URL for a term. If the prefix does not support appending then the exact location for the position of the short_name and the term accession will be specified with the {db} and {accession} tags respectively. -accession : The name unique ID of the term. -url : The URL for the term. -name : The name of the term. -definition : The term&apos;s description. any other keys may be added as desired. Returns NULL if the term cannot be found. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="174" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="174" bodyend="177"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1ga1883d7244e3a2255e1b961e210eed21f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_get_term_children</definition>
        <argsstring>($vocabulary, $accession)</argsstring>
        <name>hook_vocab_get_term_children</name>
        <param>
          <declname>$vocabulary</declname>
        </param>
        <param>
          <declname>$accession</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Hook used by the default term storage backend to provide children for a term.</para><para>This hook is called by the tripal_entity module to retrieve a list of children for a term from the storage backend. It must return an array of terms where each term contains the same structure as that of the <ref refid="de/d00/group__tripal__terms__api_1gaba7a1f6fa6f1a3be438a77ce875f7fef" kindref="member">hook_vocab_get_term()</ref>.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$vocabulary</parametername>
</parameternamelist>
<parameterdescription>
<para>The vocabulary of the vocabulary in which the term is found. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$accession</parametername>
</parameternamelist>
<parameterdescription>
<para>The unique identifier (accession) for this term.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>An array of terms where each term contains the same structure as that of the <ref refid="de/d00/group__tripal__terms__api_1gaba7a1f6fa6f1a3be438a77ce875f7fef" kindref="member">hook_vocab_get_term()</ref>, or an empty array if no children are present. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="215" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="215" bodyend="217"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1gafa36b5e990f088ab9063809659042e90" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_get_terms</definition>
        <argsstring>($vocabulary, $limit=25, $element=0)</argsstring>
        <name>hook_vocab_get_terms</name>
        <param>
          <declname>$vocabulary</declname>
        </param>
        <param>
          <declname>$limit</declname>
          <defval>25</defval>
        </param>
        <param>
          <declname>$element</declname>
          <defval>0</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retrieves a paged list of terms from a vocabulary.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$vocabulary</parametername>
</parameternamelist>
<parameterdescription>
<para>The short name of the vocabulary. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$limit</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of results to return. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$element</parametername>
</parameternamelist>
<parameterdescription>
<para>The pager element. This is equivalent to the element from the pager_default_initialize() function of Drupal. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="192" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="192" bodyend="194"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1gaf7aa281d195dfbaf5bcf9295936aafbf" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_get_vocabularies</definition>
        <argsstring>()</argsstring>
        <name>hook_vocab_get_vocabularies</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retrieves the list of vocabularies that are available on the site.</para><para><simplesect kind="return"><para>An array of vocabularies where each entry in the array is compatible with the array returned by the <ref refid="de/d00/group__tripal__terms__api_1ga3ad82d1890a30555250a6d55a28753fd" kindref="member">tripal_get_vocabulary_details()</ref> function. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="278" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="278" bodyend="280"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1ga14085561349c8c66e4abce4551957abc" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_get_vocabulary</definition>
        <argsstring>($vocabulary)</argsstring>
        <name>hook_vocab_get_vocabulary</name>
        <param>
          <declname>$vocabulary</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Hook used by the default term storage backend to provide details for a vocab.</para><para>This hook is called by the tripal_entity module to retrieve information about the vocabulary from the storage backend. It must return an array with a set of keys.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$vocabulary</parametername>
</parameternamelist>
<parameterdescription>
<para>The vocabulary of the vocabulary in which the term is found.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>An array with at least the following keys:<itemizedlist>
<listitem><para>name : The full name of the vocabulary.</para></listitem><listitem><para>short_name : The short name abbreviation for the vocabulary.</para></listitem><listitem><para>description : A brief description of the vocabulary.</para></listitem><listitem><para>url : (optional) A URL for the online resources for the vocabulary.</para></listitem><listitem><para>urlprefix : (optional) A URL to which the short_name and term accession can be appended to form a complete URL for a term. If the prefix does not support appending then the exact location for the position of the short_name and the term accession will be specified with the {db} and {accession} tags respectively. </para></listitem></itemizedlist>
</para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="264" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="264" bodyend="266"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1ga280f3ec579efe1d22fe24d1ca806369d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_import_form</definition>
        <argsstring>($form, &amp;$form_state)</argsstring>
        <name>hook_vocab_import_form</name>
        <param>
          <declname>$form</declname>
        </param>
        <param>
          <type>&amp;</type>
          <declname>$form_state</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Provides a form for importing vocabularies and their terms.</para><para>Tripal allows for vocabularies to be stored separately from the biological data. This hook allows the default term storage backend to provide an approprite form for importing ontologies (either in OBO or OWL format).</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$form</parametername>
</parameternamelist>
<parameterdescription>
<para></para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$form_state</parametername>
</parameternamelist>
<parameterdescription>
<para></para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="114" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="114" bodyend="116"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1gac4bd482e411052abbd70395e5a64466a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_import_form_submit</definition>
        <argsstring>($form, &amp;$form_state)</argsstring>
        <name>hook_vocab_import_form_submit</name>
        <param>
          <declname>$form</declname>
        </param>
        <param>
          <type>&amp;</type>
          <declname>$form_state</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Submits the <ref refid="de/d00/group__tripal__terms__api_1ga280f3ec579efe1d22fe24d1ca806369d" kindref="member">hook_vocab_import_form()</ref>.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$form</parametername>
</parameternamelist>
<parameterdescription>
<para></para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$form_state</parametername>
</parameternamelist>
<parameterdescription>
<para></para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="138" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="138" bodyend="140"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1gaac027a77ab91e67aee0adca395de2644" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_import_form_validate</definition>
        <argsstring>($form, &amp;$form_state)</argsstring>
        <name>hook_vocab_import_form_validate</name>
        <param>
          <declname>$form</declname>
        </param>
        <param>
          <type>&amp;</type>
          <declname>$form_state</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Validates the <ref refid="de/d00/group__tripal__terms__api_1ga280f3ec579efe1d22fe24d1ca806369d" kindref="member">hook_vocab_import_form()</ref>.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$form</parametername>
</parameternamelist>
<parameterdescription>
<para></para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$form_state</parametername>
</parameternamelist>
<parameterdescription>
<para></para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="126" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="126" bodyend="128"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1ga23d3d42d05c04c32686ebeb508e17ca0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_select_term_form</definition>
        <argsstring>(&amp;$form, &amp;$form_state)</argsstring>
        <name>hook_vocab_select_term_form</name>
        <param>
          <type>&amp;</type>
          <declname>$form</declname>
        </param>
        <param>
          <type>&amp;</type>
          <declname>$form_state</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Creates a form for specifying a term for <ref refid="db/d44/classTripalEntity" kindref="compound">TripalEntity</ref> creation.</para><para>This hook allows the module that implements a vocabulary storage backend to provide the form necessary to select a term that will then be used for creating a new <ref refid="db/d44/classTripalEntity" kindref="compound">TripalEntity</ref> type. Tripal will expect that a &apos;vocabulary&apos; and &apos;accession&apos; are in the $form_state[&apos;storage&apos;] array. The &apos;vocabulary&apos; and must be the abbreviated uppercase vocabulary for the vocabulary (e.g. &apos;RO&apos;, &apos;SO&apos;, &apos;PATO&apos;, etc.). The &apos;accession&apos; must be the unique term ID (or accession) for the term in the vocabulary.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$form</parametername>
</parameternamelist>
<parameterdescription>
<para></para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$form_state</parametername>
</parameternamelist>
<parameterdescription>
<para></para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>A form object. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="84" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="84" bodyend="87"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1gaa1ea96de6d50caaf9c8dfdb970f60717" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_select_term_form_validate</definition>
        <argsstring>($form, &amp;$form_state)</argsstring>
        <name>hook_vocab_select_term_form_validate</name>
        <param>
          <declname>$form</declname>
        </param>
        <param>
          <type>&amp;</type>
          <declname>$form_state</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Validates the <ref refid="de/d00/group__tripal__terms__api_1ga23d3d42d05c04c32686ebeb508e17ca0" kindref="member">hook_vocab_select_term_form()</ref>.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$form</parametername>
</parameternamelist>
<parameterdescription>
<para></para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$form_state</parametername>
</parameternamelist>
<parameterdescription>
<para></para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="97" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="97" bodyend="99"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1ga3bb77ac3f163fdeebab494360af689b2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>hook_vocab_storage_info</definition>
        <argsstring>()</argsstring>
        <name>hook_vocab_storage_info</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="54" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="54" bodyend="62"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1ga58474d3a8bdbbe47f7b595a6054a125c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_add_term</definition>
        <argsstring>($details)</argsstring>
        <name>tripal_add_term</name>
        <param>
          <declname>$details</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Adds a term to the vocabulary storage backend.</para><para>Use this function to add new terms dynamically to the vocabulary storage backend. If the term already exists no new term is added.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$details</parametername>
</parameternamelist>
<parameterdescription>
<para>An array with at least the following keys: -vocabulary : An associative array with the following keys -name: The short name for the vocabulary (e.g. SO, PATO, etc). -description: The description of this vocabulary. -url: The URL for the vocabulary. -accession : The name unique ID of the term. -url : The URL for the term. -name : The name of the term. -definition : The term&apos;s description. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>TRUE if the term was added, FALSE otherwise. If the term already exists it will be updated and the return value will be TRUE. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="332" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="332" bodyend="345"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1ga28975cde3fdcc84ab64dc3265e16b9cc" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_get_term_children</definition>
        <argsstring>($vocabulary, $accession)</argsstring>
        <name>tripal_get_term_children</name>
        <param>
          <declname>$vocabulary</declname>
        </param>
        <param>
          <declname>$accession</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retrieves the immediate children of the given term.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$vocabulary</parametername>
</parameternamelist>
<parameterdescription>
<para>The vocabulary of the vocabulary in which the term is found. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$accession</parametername>
</parameternamelist>
<parameterdescription>
<para>The unique identifier (accession) for this term.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Returns an array of terms where each term is compatible with the array returned by the <ref refid="de/d00/group__tripal__terms__api_1gaf99a705ba9ec49d8d1e46aa0300505c0" kindref="member">tripal_get_term_details()</ref> function. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="478" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="478" bodyend="492"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1gaf99a705ba9ec49d8d1e46aa0300505c0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_get_term_details</definition>
        <argsstring>($vocabulary, $accession)</argsstring>
        <name>tripal_get_term_details</name>
        <param>
          <declname>$vocabulary</declname>
        </param>
        <param>
          <declname>$accession</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retrieves full information about a vocabulary term.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$vocabulary</parametername>
</parameternamelist>
<parameterdescription>
<para>The vocabulary of the vocabulary in which the term is found. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$accession</parametername>
</parameternamelist>
<parameterdescription>
<para>The unique identifier (accession) for this term.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>An array with at least the following keys:<itemizedlist>
<listitem><para>vocabulary : An array containing the following keys:<itemizedlist>
<listitem><para>name : The full name of the vocabulary.</para></listitem><listitem><para>short_name : The short name abbreviation for the vocabulary.</para></listitem><listitem><para>description : A brief description of the vocabulary.</para></listitem><listitem><para>url : (optional) A URL for the online resources for the vocabulary.</para></listitem><listitem><para>urlprefix : (optional) A URL to which the short_name and term accession can be appended to form a complete URL for a term. If the prefix does not support appending then the exact location for the position of the short_name and the term accession will be specified with the {db} and {accession} tags respectively.</para></listitem></itemizedlist>
</para></listitem><listitem><para>accession : The name unique ID of the term.</para></listitem><listitem><para>url : The URL for the term.</para></listitem><listitem><para>name : The name of the term.</para></listitem><listitem><para>definition : The term&apos;s description. any other keys may be added as desired. Returns NULL if the term cannot be found. </para></listitem></itemizedlist>
</para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="377" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="377" bodyend="429"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1gad9a8a845422fae77c4e9fffa9886cd6c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_get_term_lookup_form</definition>
        <argsstring>(&amp;$form, &amp;$form_state, $default_name=&apos;&apos;, $title=&apos;Vocabulary Term&apos;, $description=&apos;&apos;, $is_required, $field_name=&apos;&apos;, $delta=0)</argsstring>
        <name>tripal_get_term_lookup_form</name>
        <param>
          <type>&amp;</type>
          <declname>$form</declname>
        </param>
        <param>
          <type>&amp;</type>
          <declname>$form_state</declname>
        </param>
        <param>
          <declname>$default_name</declname>
          <defval>&apos;&apos;</defval>
        </param>
        <param>
          <declname>$title</declname>
          <defval>&apos;Vocabulary Term&apos;</defval>
        </param>
        <param>
          <declname>$description</declname>
          <defval>&apos;&apos;</defval>
        </param>
        <param>
          <declname>$is_required</declname>
        </param>
        <param>
          <declname>$field_name</declname>
          <defval>&apos;&apos;</defval>
        </param>
        <param>
          <declname>$delta</declname>
          <defval>0</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Provides a term lookup form.</para><para>It may be necessary at times for a form to provide to the user the ability to lookup and use a controlled vocabulary term. However, a simple text box or auto-lookup is not sufficient because a term name may be identical in multiple vocabularies and the user would need to select the proper term.</para><para>This function will add the form elements necessary to provide a lookup form. The form elements should work with a flat form (no #tree set for the form) or with a form in a <ref refid="d9/d83/classTripalField" kindref="compound">TripalField</ref>.</para><para>Use the <ref refid="de/d00/group__tripal__terms__api_1gaf444a2b8245c58e2402ead6d39e52fcd" kindref="member">tripal_get_term_lookup_form_result()</ref> function to retreive the result in a form submit or validate.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$form</parametername>
</parameternamelist>
<parameterdescription>
<para>The form (or $widget form). </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$form_state</parametername>
</parameternamelist>
<parameterdescription>
<para>The form state. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$title</parametername>
</parameternamelist>
<parameterdescription>
<para>The title to give to the field set. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$description</parametername>
</parameternamelist>
<parameterdescription>
<para>A description for the lookup field element. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$is_required</parametername>
</parameternamelist>
<parameterdescription>
<para>Indicates if this form element is required. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$field_name</parametername>
</parameternamelist>
<parameterdescription>
<para>The name of the field, if this form is being added to a field widget. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$delta</parametername>
</parameternamelist>
<parameterdescription>
<para>The delta value for the field if this form is being added to a field widget. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="619" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="619" bodyend="783"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1gab4d1150cac6c95c8006abaa243cf10f9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_get_term_lookup_form_ajax_callback</definition>
        <argsstring>($form, $form_state)</argsstring>
        <name>tripal_get_term_lookup_form_ajax_callback</name>
        <param>
          <declname>$form</declname>
        </param>
        <param>
          <declname>$form_state</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Implements an AJAX callback for the tripal_chado_vocab_select_term_form. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="833" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="833" bodyend="847"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1gaf444a2b8245c58e2402ead6d39e52fcd" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_get_term_lookup_form_result</definition>
        <argsstring>($form, $form_state, $field_name=&apos;&apos;, $delta=0)</argsstring>
        <name>tripal_get_term_lookup_form_result</name>
        <param>
          <declname>$form</declname>
        </param>
        <param>
          <declname>$form_state</declname>
        </param>
        <param>
          <declname>$field_name</declname>
          <defval>&apos;&apos;</defval>
        </param>
        <param>
          <declname>$delta</declname>
          <defval>0</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns the terms selected from the tripal_get_term_lookup_form.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$form</parametername>
</parameternamelist>
<parameterdescription>
<para>The form (or $widget form). </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$form_state</parametername>
</parameternamelist>
<parameterdescription>
<para>The form state. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$field_name</parametername>
</parameternamelist>
<parameterdescription>
<para>The name of the field, if this form is being added to a field widget. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$delta</parametername>
</parameternamelist>
<parameterdescription>
<para>The delta value for the field if this form is being added to a field widget.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>An array of term objects for each of the user selected terms. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="803" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="803" bodyend="826"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1ga5df3a72e30fa833f242d54789d1f7af9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_get_vocabularies</definition>
        <argsstring>()</argsstring>
        <name>tripal_get_vocabularies</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retrieves the list of vocabularies that are available on the site.</para><para><simplesect kind="return"><para>An array of vocabularies where each entry in the array is compatible with the array returned by the <ref refid="de/d00/group__tripal__terms__api_1ga3ad82d1890a30555250a6d55a28753fd" kindref="member">tripal_get_vocabulary_details()</ref> function. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="573" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="573" bodyend="583"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1ga3ad82d1890a30555250a6d55a28753fd" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_get_vocabulary_details</definition>
        <argsstring>($vocabulary)</argsstring>
        <name>tripal_get_vocabulary_details</name>
        <param>
          <declname>$vocabulary</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retrieves full information about a vocabulary.</para><para>Vocabularies are stored in a database backend. Tripal has no requirements for how terms are stored. By default, the tripal_chado modules provides storage for vocabularies and terms. This function will call the <ref refid="de/d00/group__tripal__terms__api_1gaba7a1f6fa6f1a3be438a77ce875f7fef" kindref="member">hook_vocab_get_term()</ref> function for the database backend that is housing the vocabularies and allow it to return the details about the term.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$vocabulary</parametername>
</parameternamelist>
<parameterdescription>
<para>The vocabulary of the vocabulary in which the term is found.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>An array with at least the following keys:<itemizedlist>
<listitem><para>name: The full name of the vocabulary.</para></listitem><listitem><para>short_name: The short name abbreviation for the vocabulary.</para></listitem><listitem><para>description: A brief description of the vocabulary.</para></listitem><listitem><para>url: A URL for the online resources for the vocabulary.</para></listitem><listitem><para>urlprefix: A URL to which the short_name and term accession can be appended to form a complete URL for a term. If the prefix does not support appending then the exact location for the position of the short_name and the term accession will be specified with the {db} and {accession} tags respectively.</para></listitem><listitem><para>sw_url: The URL for mapping terms via the semantic web.</para></listitem><listitem><para>num_terms: The number of terms loaded in the vocabulary. </para></listitem></itemizedlist>
</para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="522" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="522" bodyend="535"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1ga9ea42677ac2e0318e9b477bc9434d19f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_get_vocabulary_root_terms</definition>
        <argsstring>($vocabulary)</argsstring>
        <name>tripal_get_vocabulary_root_terms</name>
        <param>
          <declname>$vocabulary</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retrieves the immediate children of the given term.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$vocabulary</parametername>
</parameternamelist>
<parameterdescription>
<para>The vocabulary of the vocabulary in which the term is found. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$accession</parametername>
</parameternamelist>
<parameterdescription>
<para>The unique identifier (accession) for this term.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Returns an array of terms where each term is compatible with the array returned by the <ref refid="de/d00/group__tripal__terms__api_1gaf99a705ba9ec49d8d1e46aa0300505c0" kindref="member">tripal_get_term_details()</ref> function. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="445" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="445" bodyend="462"/>
      </memberdef>
      <memberdef kind="function" id="de/d00/group__tripal__terms__api_1gaca4701e91b54bcd878701a07b6a522e1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_get_vocabulary_terms</definition>
        <argsstring>($vocabulary, $limit=25, $element=0)</argsstring>
        <name>tripal_get_vocabulary_terms</name>
        <param>
          <declname>$vocabulary</declname>
        </param>
        <param>
          <declname>$limit</declname>
          <defval>25</defval>
        </param>
        <param>
          <declname>$element</declname>
          <defval>0</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retrieves a paged list of terms from a vocabulary.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$vocabulary</parametername>
</parameternamelist>
<parameterdescription>
<para>The short name of the vocabulary. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$limit</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of results to return. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$element</parametername>
</parameternamelist>
<parameterdescription>
<para>The pager element. This is equivalent to the element from the pager_default_initialize() function of Drupal. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.terms.api.inc" line="551" column="1" bodyfile="tripal/api/tripal.terms.api.inc" bodystart="551" bodyend="561"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>Provides an application programming interface (API) for working with controlled vocaublary terms. </para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal">&lt;?php</highlight></codeline>
<codeline lineno="54" refid="de/d00/group__tripal__terms__api_1ga3bb77ac3f163fdeebab494360af689b2" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1ga3bb77ac3f163fdeebab494360af689b2" kindref="member">hook_vocab_storage_info</ref>()<sp/>{</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>array(</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;term_chado_storage&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>array(</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;label&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Chado&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;description&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Integrates<sp/>terms<sp/>stored<sp/>in<sp/>the<sp/>local<sp/>Chado<sp/>database<sp/>with<sp/>Tripal<sp/>entities.&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;settings&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>array(),</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>),</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/>);</highlight></codeline>
<codeline lineno="62"><highlight class="normal">}</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="84" refid="de/d00/group__tripal__terms__api_1ga23d3d42d05c04c32686ebeb508e17ca0" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1ga23d3d42d05c04c32686ebeb508e17ca0" kindref="member">hook_vocab_select_term_form</ref>(&amp;<ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>,<sp/>&amp;$form_state)<sp/>{</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>;</highlight></codeline>
<codeline lineno="87"><highlight class="normal">}</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="97" refid="de/d00/group__tripal__terms__api_1gaa1ea96de6d50caaf9c8dfdb970f60717" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1gaa1ea96de6d50caaf9c8dfdb970f60717" kindref="member">hook_vocab_select_term_form_validate</ref>(<ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>,<sp/>&amp;$form_state)<sp/>{</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal">}</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="114" refid="de/d00/group__tripal__terms__api_1ga280f3ec579efe1d22fe24d1ca806369d" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1ga280f3ec579efe1d22fe24d1ca806369d" kindref="member">hook_vocab_import_form</ref>(<ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>,<sp/>&amp;$form_state)<sp/>{</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>;</highlight></codeline>
<codeline lineno="116"><highlight class="normal">}</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="126" refid="de/d00/group__tripal__terms__api_1gaac027a77ab91e67aee0adca395de2644" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1gaac027a77ab91e67aee0adca395de2644" kindref="member">hook_vocab_import_form_validate</ref>(<ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>,<sp/>&amp;$form_state)<sp/>{</highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal">}</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="138" refid="de/d00/group__tripal__terms__api_1gac4bd482e411052abbd70395e5a64466a" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1gac4bd482e411052abbd70395e5a64466a" kindref="member">hook_vocab_import_form_submit</ref>(<ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>,<sp/>&amp;$form_state)<sp/>{</highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal">}</highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight></codeline>
<codeline lineno="174" refid="de/d00/group__tripal__terms__api_1gaba7a1f6fa6f1a3be438a77ce875f7fef" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1gaba7a1f6fa6f1a3be438a77ce875f7fef" kindref="member">hook_vocab_get_term</ref>($vocabulary,<sp/>$accession)<sp/>{</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>See<sp/>the<sp/>tripal_chado_vocab_get_term()<sp/>function<sp/>for<sp/>an<sp/>example.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal">}</highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="192" refid="de/d00/group__tripal__terms__api_1gafa36b5e990f088ab9063809659042e90" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1gafa36b5e990f088ab9063809659042e90" kindref="member">hook_vocab_get_terms</ref>($vocabulary,<sp/>$limit<sp/>=<sp/>25,<sp/><ref refid="dd/d72/tripal__library__features_8tpl_8php_1a479e9a5e4ded6cebc5be769c29e95893" kindref="member">$element</ref><sp/>=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>See<sp/>the<sp/>tripal_chado_vocab_get_terms()<sp/>function<sp/>for<sp/>an<sp/>example.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal">}</highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="215" refid="de/d00/group__tripal__terms__api_1ga1883d7244e3a2255e1b961e210eed21f" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1ga1883d7244e3a2255e1b961e210eed21f" kindref="member">hook_vocab_get_term_children</ref>($vocabulary,<sp/>$accession)<sp/>{</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>See<sp/>the<sp/>tripal_chado_vocab_get_term_children()<sp/>function<sp/>for<sp/>an<sp/>example.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal">}</highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight></codeline>
<codeline lineno="236" refid="de/d00/group__tripal__terms__api_1ga306a347a421d610f1f958d5b45e70634" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1ga306a347a421d610f1f958d5b45e70634" kindref="member">hook_vocab_get_root_terms</ref>($vocabulary)<sp/>{</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>See<sp/>the<sp/>tripal_chado_vocab_get_root_terms()<sp/>function<sp/>for<sp/>an<sp/>example.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal">}</highlight></codeline>
<codeline lineno="239"><highlight class="normal"></highlight></codeline>
<codeline lineno="264" refid="de/d00/group__tripal__terms__api_1ga14085561349c8c66e4abce4551957abc" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1ga14085561349c8c66e4abce4551957abc" kindref="member">hook_vocab_get_vocabulary</ref>($vocabulary)<sp/>{</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>See<sp/>the<sp/>tripal_chado_vocab_get_vocabulary()<sp/>function<sp/>for<sp/>an<sp/>example.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal">}</highlight></codeline>
<codeline lineno="267"><highlight class="normal"></highlight></codeline>
<codeline lineno="278" refid="de/d00/group__tripal__terms__api_1gaf7aa281d195dfbaf5bcf9295936aafbf" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1gaf7aa281d195dfbaf5bcf9295936aafbf" kindref="member">hook_vocab_get_vocabularies</ref>()<sp/>{</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>See<sp/>the<sp/>tripal_chado_vocab_get_vocabularies()<sp/>function<sp/>for<sp/>an<sp/>example.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal">}</highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight></codeline>
<codeline lineno="306" refid="de/d00/group__tripal__terms__api_1gacbd2948d7bec249c6a8143f2d4046d0f" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1gacbd2948d7bec249c6a8143f2d4046d0f" kindref="member">hook_vocab_add_term</ref>($details)<sp/>{</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>See<sp/>the<sp/>tripal_chado_vocab_set_term()<sp/>function<sp/>for<sp/>an<sp/>example.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal">}</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="332" refid="de/d00/group__tripal__terms__api_1ga58474d3a8bdbbe47f7b595a6054a125c" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1ga58474d3a8bdbbe47f7b595a6054a125c" kindref="member">tripal_add_term</ref>($details)<sp/>{</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>TODO:<sp/>we<sp/>need<sp/>some<sp/>sort<sp/>of<sp/>administrative<sp/>interface<sp/>that<sp/>lets<sp/>the<sp/>user</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>switch<sp/>to<sp/>the<sp/>desired<sp/>vocabulary<sp/>type.<sp/>For<sp/>now,<sp/>we&apos;ll<sp/>just<sp/>use<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>first<sp/>one<sp/>in<sp/>the<sp/>list.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/>$stores<sp/>=<sp/>module_invoke_all(</highlight><highlight class="stringliteral">&apos;vocab_storage_info&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_array($stores)<sp/>and<sp/>count($stores)<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/>$keys<sp/>=<sp/>array_keys($stores);</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/>$module<sp/>=<sp/>$stores[$keys[0]][</highlight><highlight class="stringliteral">&apos;module&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/>$function<sp/>=<sp/>$module<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;_vocab_add_term&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(function_exists($function))<sp/>{</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$function($details);</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="345"><highlight class="normal">}</highlight></codeline>
<codeline lineno="346"><highlight class="normal"></highlight></codeline>
<codeline lineno="347"><highlight class="normal"></highlight></codeline>
<codeline lineno="377" refid="de/d00/group__tripal__terms__api_1gaf99a705ba9ec49d8d1e46aa0300505c0" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1gaf99a705ba9ec49d8d1e46aa0300505c0" kindref="member">tripal_get_term_details</ref>($vocabulary,<sp/>$accession)<sp/>{</highlight></codeline>
<codeline lineno="378"><highlight class="normal"></highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(empty($vocabulary)<sp/>OR<sp/>empty($accession))<sp/>{</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="d9/dae/group__tripal__notify__api_1ga2240e326e18c3074843ac815e4629ee2" kindref="member">tripal_report_error</ref>(</highlight><highlight class="stringliteral">&apos;tripal_term&apos;</highlight><highlight class="normal">,<sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a4b04c4b1ce52da710d57abf5c4b09dd3" kindref="member">TRIPAL_ERROR</ref>,<sp/></highlight><highlight class="stringliteral">&quot;Unable<sp/>to<sp/>retrieve<sp/>details<sp/>for<sp/>term<sp/>due<sp/>to<sp/>missing<sp/>vocabulary<sp/>and/or<sp/>accession&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>FALSE;</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="383"><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>TODO:<sp/>we<sp/>need<sp/>some<sp/>sort<sp/>of<sp/>administrative<sp/>interface<sp/>that<sp/>lets<sp/>the<sp/>user</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>switch<sp/>to<sp/>the<sp/>desired<sp/>vocabulary<sp/>type.<sp/>For<sp/>now,<sp/>we&apos;ll<sp/>just<sp/>use<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>first<sp/>one<sp/>in<sp/>the<sp/>list.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/>$stores<sp/>=<sp/>module_invoke_all(</highlight><highlight class="stringliteral">&apos;vocab_storage_info&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_array($stores)<sp/>and<sp/>count($stores)<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/>$keys<sp/>=<sp/>array_keys($stores);</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/>$module<sp/>=<sp/>$stores[$keys[0]][</highlight><highlight class="stringliteral">&apos;module&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/>$function<sp/>=<sp/>$module<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;_vocab_get_term&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(function_exists($function))<sp/>{</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$term<sp/>=<sp/>$function($vocabulary,<sp/>$accession);</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>the<sp/>vocabulary<sp/>is<sp/>missing<sp/>then<sp/>we<sp/>have<sp/>a<sp/>problem.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!array_key_exists(</highlight><highlight class="stringliteral">&apos;vocabulary&apos;</highlight><highlight class="normal">,<sp/>$term))<sp/>{</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="d9/dae/group__tripal__notify__api_1ga2240e326e18c3074843ac815e4629ee2" kindref="member">tripal_report_error</ref>(</highlight><highlight class="stringliteral">&apos;tripal_term&apos;</highlight><highlight class="normal">,<sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a4b04c4b1ce52da710d57abf5c4b09dd3" kindref="member">TRIPAL_ERROR</ref>,<sp/></highlight><highlight class="stringliteral">&quot;The<sp/>term<sp/>is<sp/>missing<sp/>a<sp/>vocabulary<sp/>entry.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>FALSE;</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="400"><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>sure<sp/>the<sp/>term<sp/>has<sp/>a<sp/>URL.<sp/>If<sp/>it<sp/>does<sp/>not,<sp/>then<sp/>use<sp/>the<sp/>Tripal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>interface<sp/>as<sp/>the<sp/>URL<sp/>for<sp/>the<sp/>term.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$url_missing<sp/>=<sp/>FALSE;</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$term[</highlight><highlight class="stringliteral">&apos;url&apos;</highlight><highlight class="normal">])<sp/>{</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$url_missing<sp/>=<sp/>TRUE;</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$term[</highlight><highlight class="stringliteral">&apos;url&apos;</highlight><highlight class="normal">]<sp/>=<sp/>url(</highlight><highlight class="stringliteral">&apos;cv/lookup/&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term[</highlight><highlight class="stringliteral">&apos;vocabulary&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;short_name&apos;</highlight><highlight class="normal">]<sp/>.<sp/></highlight><highlight class="charliteral">&apos;/&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term[</highlight><highlight class="stringliteral">&apos;accession&apos;</highlight><highlight class="normal">],<sp/>[</highlight><highlight class="stringliteral">&apos;absolute&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>TRUE]);</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$term[</highlight><highlight class="stringliteral">&apos;vocabulary&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;sw_url&apos;</highlight><highlight class="normal">])<sp/>{</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$url_missing<sp/>=<sp/>TRUE;</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$term[</highlight><highlight class="stringliteral">&apos;vocabulary&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;sw_url&apos;</highlight><highlight class="normal">]<sp/>=<sp/>url(</highlight><highlight class="stringliteral">&apos;cv/lookup/&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term[</highlight><highlight class="stringliteral">&apos;vocabulary&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;short_name&apos;</highlight><highlight class="normal">]<sp/>.<sp/></highlight><highlight class="charliteral">&apos;/&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term[</highlight><highlight class="stringliteral">&apos;accession&apos;</highlight><highlight class="normal">],<sp/>[</highlight><highlight class="stringliteral">&apos;absolute&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>TRUE]);</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Let<sp/>the<sp/>user<sp/>know<sp/>that<sp/>the<sp/>url<sp/>is<sp/>missing.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($url_missing)<sp/>{</highlight></codeline>
<codeline lineno="414"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tripal_add_notification(</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;Missing<sp/>CV<sp/>term<sp/>URL&quot;,<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t(&quot;The<sp/>controlled<sp/>vocabulary,<sp/>%vocab,<sp/>is<sp/>missing<sp/>a<sp/>URL.<sp/>Tripal<sp/>will<sp/>handle<sp/>&quot;<sp/>.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="417"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;this<sp/>by<sp/>linking<sp/>to<sp/>the<sp/>cv/lookup<sp/>page<sp/>of<sp/>this<sp/>site.<sp/>However,<sp/>the<sp/>correct<sp/>&quot;<sp/>.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="418"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;should<sp/>be<sp/>updated<sp/>for<sp/>this<sp/>site&quot;,<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="419"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[&apos;%vocab&apos;<sp/>=&gt;<sp/>$term[&apos;vocabulary&apos;][&apos;short_name&apos;]]),</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="420"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;Controlled<sp/>Vocabularies&apos;,<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>NULL,<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="422"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;mising-vocab-&apos;<sp/>.<sp/>$term[&apos;vocabulary&apos;][&apos;short_name&apos;]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="423"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$term;</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="429"><highlight class="normal">}</highlight></codeline>
<codeline lineno="430"><highlight class="normal"></highlight></codeline>
<codeline lineno="445" refid="de/d00/group__tripal__terms__api_1ga9ea42677ac2e0318e9b477bc9434d19f" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1ga9ea42677ac2e0318e9b477bc9434d19f" kindref="member">tripal_get_vocabulary_root_terms</ref>($vocabulary)<sp/>{</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(empty($vocabulary))<sp/>{</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="d9/dae/group__tripal__notify__api_1ga2240e326e18c3074843ac815e4629ee2" kindref="member">tripal_report_error</ref>(</highlight><highlight class="stringliteral">&apos;tripal_term&apos;</highlight><highlight class="normal">,<sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a4b04c4b1ce52da710d57abf5c4b09dd3" kindref="member">TRIPAL_ERROR</ref>,<sp/></highlight><highlight class="stringliteral">&apos;Unable<sp/>to<sp/>retrieve<sp/>details<sp/>for<sp/>term<sp/>due<sp/>to<sp/>missing<sp/>vocabulary.&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="449"><highlight class="normal"></highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>TODO:<sp/>we<sp/>need<sp/>some<sp/>sort<sp/>of<sp/>administrative<sp/>interface<sp/>that<sp/>lets<sp/>the<sp/>user</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>switch<sp/>to<sp/>the<sp/>desired<sp/>vocabulary<sp/>type.<sp/>For<sp/>now,<sp/>we&apos;ll<sp/>just<sp/>use<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>first<sp/>one<sp/>in<sp/>the<sp/>list.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/>$stores<sp/>=<sp/>module_invoke_all(</highlight><highlight class="stringliteral">&apos;vocab_storage_info&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_array($stores)<sp/>and<sp/>count($stores)<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/>$keys<sp/>=<sp/>array_keys($stores);</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/>$module<sp/>=<sp/>$stores[$keys[0]][</highlight><highlight class="stringliteral">&apos;module&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/>$function<sp/>=<sp/>$module<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;_vocab_get_root_terms&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(function_exists($function))<sp/>{</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$function($vocabulary);</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="462"><highlight class="normal">}</highlight></codeline>
<codeline lineno="463"><highlight class="normal"></highlight></codeline>
<codeline lineno="478" refid="de/d00/group__tripal__terms__api_1ga28975cde3fdcc84ab64dc3265e16b9cc" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1ga28975cde3fdcc84ab64dc3265e16b9cc" kindref="member">tripal_get_term_children</ref>($vocabulary,<sp/>$accession)<sp/>{</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(empty($vocabulary)<sp/>OR<sp/>empty($accession))<sp/>{</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="d9/dae/group__tripal__notify__api_1ga2240e326e18c3074843ac815e4629ee2" kindref="member">tripal_report_error</ref>(</highlight><highlight class="stringliteral">&apos;tripal_term&apos;</highlight><highlight class="normal">,<sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a4b04c4b1ce52da710d57abf5c4b09dd3" kindref="member">TRIPAL_ERROR</ref>,<sp/></highlight><highlight class="stringliteral">&apos;Unable<sp/>to<sp/>retrieve<sp/>details<sp/>for<sp/>term<sp/>due<sp/>to<sp/>missing<sp/>vocabulary<sp/>and/or<sp/>accession.&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="482"><highlight class="normal"></highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/>$stores<sp/>=<sp/>module_invoke_all(</highlight><highlight class="stringliteral">&apos;vocab_storage_info&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_array($stores)<sp/>and<sp/>count($stores)<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/>$keys<sp/>=<sp/>array_keys($stores);</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/>$module<sp/>=<sp/>$stores[$keys[0]][</highlight><highlight class="stringliteral">&apos;module&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/>$function<sp/>=<sp/>$module<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;_vocab_get_term_children&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(function_exists($function))<sp/>{</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$function($vocabulary,<sp/>$accession);</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="492"><highlight class="normal">}</highlight></codeline>
<codeline lineno="493"><highlight class="normal"></highlight></codeline>
<codeline lineno="522" refid="de/d00/group__tripal__terms__api_1ga3ad82d1890a30555250a6d55a28753fd" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1ga3ad82d1890a30555250a6d55a28753fd" kindref="member">tripal_get_vocabulary_details</ref>($vocabulary)<sp/>{</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>TODO:<sp/>we<sp/>need<sp/>some<sp/>sort<sp/>of<sp/>administrative<sp/>interface<sp/>that<sp/>lets<sp/>the<sp/>user</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>switch<sp/>to<sp/>the<sp/>desired<sp/>vocabulary<sp/>type.<sp/>For<sp/>now,<sp/>we&apos;ll<sp/>just<sp/>use<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>first<sp/>one<sp/>in<sp/>the<sp/>list.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/>$stores<sp/>=<sp/>module_invoke_all(</highlight><highlight class="stringliteral">&apos;vocab_storage_info&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_array($stores)<sp/>and<sp/>count($stores)<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/>$keys<sp/>=<sp/>array_keys($stores);</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/>$module<sp/>=<sp/>$stores[$keys[0]][</highlight><highlight class="stringliteral">&apos;module&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/>$function<sp/>=<sp/>$module<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;_vocab_get_vocabulary&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(function_exists($function))<sp/>{</highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$function($vocabulary);</highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="535"><highlight class="normal">}</highlight></codeline>
<codeline lineno="536"><highlight class="normal"></highlight></codeline>
<codeline lineno="537"><highlight class="normal"></highlight></codeline>
<codeline lineno="551" refid="de/d00/group__tripal__terms__api_1gaca4701e91b54bcd878701a07b6a522e1" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1gaca4701e91b54bcd878701a07b6a522e1" kindref="member">tripal_get_vocabulary_terms</ref>($vocabulary,<sp/>$limit<sp/>=<sp/>25,<sp/><ref refid="dd/d72/tripal__library__features_8tpl_8php_1a479e9a5e4ded6cebc5be769c29e95893" kindref="member">$element</ref><sp/>=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/>$stores<sp/>=<sp/>module_invoke_all(</highlight><highlight class="stringliteral">&apos;vocab_storage_info&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_array($stores)<sp/>and<sp/>count($stores)<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/>$keys<sp/>=<sp/>array_keys($stores);</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/>$module<sp/>=<sp/>$stores[$keys[0]][</highlight><highlight class="stringliteral">&apos;module&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/>$function<sp/>=<sp/>$module<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;_vocab_get_terms&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(function_exists($function))<sp/>{</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$function($vocabulary,<sp/>$limit,<sp/><ref refid="dd/d72/tripal__library__features_8tpl_8php_1a479e9a5e4ded6cebc5be769c29e95893" kindref="member">$element</ref>);</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="561"><highlight class="normal">}</highlight></codeline>
<codeline lineno="562"><highlight class="normal"></highlight></codeline>
<codeline lineno="573" refid="de/d00/group__tripal__terms__api_1ga5df3a72e30fa833f242d54789d1f7af9" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1ga5df3a72e30fa833f242d54789d1f7af9" kindref="member">tripal_get_vocabularies</ref>()<sp/>{</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/>$stores<sp/>=<sp/>module_invoke_all(</highlight><highlight class="stringliteral">&apos;vocab_storage_info&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_array($stores)<sp/>and<sp/>count($stores)<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/>$keys<sp/>=<sp/>array_keys($stores);</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/>$module<sp/>=<sp/>$stores[$keys[0]][</highlight><highlight class="stringliteral">&apos;module&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/>$function<sp/>=<sp/>$module<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;_vocab_get_vocabularies&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(function_exists($function))<sp/>{</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$function();</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="583"><highlight class="normal">}</highlight></codeline>
<codeline lineno="584"><highlight class="normal"></highlight></codeline>
<codeline lineno="585"><highlight class="normal"></highlight></codeline>
<codeline lineno="619" refid="de/d00/group__tripal__terms__api_1gad9a8a845422fae77c4e9fffa9886cd6c" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1gad9a8a845422fae77c4e9fffa9886cd6c" kindref="member">tripal_get_term_lookup_form</ref>(&amp;<ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>,<sp/>&amp;$form_state,<sp/>$default_name<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/>$title<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;Vocabulary<sp/>Term&apos;</highlight><highlight class="normal">,<sp/><ref refid="de/d47/tripal__project__base_8tpl_8php_1a87b032cba06009e3467abf1c8018d960" kindref="member">$description</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>$is_required,</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/>$field_name<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>$delta<sp/>=<sp/>0<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/>$ajax_wrapper_id<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;tripal-vocab-select-form-&apos;</highlight><highlight class="normal"><sp/>.<sp/>$delta;</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($field_name)<sp/>{</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/>$ajax_wrapper_id<sp/>=<sp/>$field_name<sp/>.<sp/></highlight><highlight class="charliteral">&apos;-&apos;</highlight><highlight class="normal"><sp/>.<sp/>$delta;</highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="627"><highlight class="normal"></highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/>$term_name<sp/>=<sp/>$default_name;</highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(array_key_exists(</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">,<sp/>$form_state)<sp/>and<sp/>array_key_exists(</highlight><highlight class="stringliteral">&apos;term_name&apos;</highlight><highlight class="normal">,<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">]))<sp/>{</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/>$term_name<sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;term_name&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($field_name<sp/>and<sp/>array_key_exists(</highlight><highlight class="stringliteral">&apos;input&apos;</highlight><highlight class="normal">,<sp/>$form_state)<sp/>and<sp/>array_key_exists($field_name,<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;input&apos;</highlight><highlight class="normal">]))<sp/>{</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/>$term_name<sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;input&apos;</highlight><highlight class="normal">][$field_name][</highlight><highlight class="stringliteral">&apos;und&apos;</highlight><highlight class="normal">][$delta][</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;term_name&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="635"><highlight class="normal"></highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="de/d47/tripal__project__base_8tpl_8php_1a87b032cba06009e3467abf1c8018d960" kindref="member">$description</ref>)<sp/>{</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="de/d47/tripal__project__base_8tpl_8php_1a87b032cba06009e3467abf1c8018d960" kindref="member">$description</ref><sp/>=<sp/>t(</highlight><highlight class="stringliteral">&apos;Enter<sp/>the<sp/>name<sp/>of<sp/>the<sp/>term<sp/>that<sp/>specifies<sp/>the<sp/>type.<sp/>&apos;</highlight><highlight class="normal"><sp/>.</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;The<sp/>type<sp/>must<sp/>be<sp/>the<sp/>name<sp/>of<sp/>a<sp/>term<sp/>in<sp/>a<sp/>controlled<sp/>vocabulary<sp/>and<sp/>&apos;</highlight><highlight class="normal"><sp/>.</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;the<sp/>controlled<sp/>vocabulary<sp/>should<sp/>already<sp/>be<sp/>loaded<sp/>into<sp/>this<sp/>site.&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="641"><highlight class="normal"></highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/>$form_state[</highlight><highlight class="stringliteral">&apos;storage&apos;</highlight><highlight class="normal">][$ajax_wrapper_id][</highlight><highlight class="stringliteral">&apos;term_match_field&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$field_name;</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/>$form_state[</highlight><highlight class="stringliteral">&apos;storage&apos;</highlight><highlight class="normal">][$ajax_wrapper_id][</highlight><highlight class="stringliteral">&apos;term_match_delta&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$delta;</highlight></codeline>
<codeline lineno="644"><highlight class="normal"></highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">]<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;fieldset&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#collapsible&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>FALSE,</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#collapsed&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>FALSE,</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#title&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t($title),</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#prefix&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;&lt;div<sp/>id<sp/>=<sp/>&quot;&apos;</highlight><highlight class="normal"><sp/>.<sp/>$ajax_wrapper_id<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;&quot;&gt;&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#suffix&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;&lt;/div&gt;&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/>);</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;term_name&apos;</highlight><highlight class="normal">]<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#title&apos;</highlight><highlight class="normal"><sp/><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Type&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;textfield&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#description&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/><ref refid="de/d47/tripal__project__base_8tpl_8php_1a87b032cba06009e3467abf1c8018d960" kindref="member">$description</ref>,</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#required&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$is_required,</highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#default_value&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$term_name,</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#autocomplete_path&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&quot;admin/tripal/storage/chado/auto_name/cvterm/&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/>);</highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;select_button&apos;</highlight><highlight class="normal">]<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;button&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#value&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Lookup<sp/>Term&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#name&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;select_cvterm_&apos;</highlight><highlight class="normal"><sp/>.<sp/>$ajax_wrapper_id,</highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#validate&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>array(),</highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#limit_validation_errors&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>array(),</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#ajax&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>array(</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;callback&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&quot;tripal_get_term_lookup_form_ajax_callback&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;wrapper&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$ajax_wrapper_id,</highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;effect&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;fade&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;method&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;replace&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/>),</highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/>);</highlight></codeline>
<codeline lineno="674"><highlight class="normal"></highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>the<sp/>term<sp/>has<sp/>been<sp/>provided<sp/>by<sp/>the<sp/>user<sp/>then<sp/>we<sp/>want<sp/>to<sp/>search<sp/>for</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>matching<sp/>terms<sp/>in<sp/>the<sp/>database<sp/>and<sp/>let<sp/>them<sp/>select<sp/>among<sp/>any<sp/>matches.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($term_name)<sp/>{</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/>$submit_disabled<sp/>=<sp/>TRUE;</highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;terms_list&apos;</highlight><highlight class="normal">]<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;fieldset&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#title&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Matching<sp/>Terms&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#description&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Please<sp/>select<sp/>the<sp/>term<sp/>the<sp/>best<sp/>matches<sp/>the</highlight></codeline>
<codeline lineno="683"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content<sp/>type<sp/>you<sp/>want<sp/>to<sp/>create.<sp/>If<sp/>the<sp/>same<sp/>term<sp/>exists<sp/>in</highlight></codeline>
<codeline lineno="684"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>multiple<sp/>vocabularies<sp/>you<sp/>will<sp/>see<sp/>more<sp/>than<sp/>one<sp/>option<sp/>below.&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/>$match<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$term_name,</highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>TODO:<sp/>this<sp/>should<sp/>not<sp/>call<sp/>the<sp/>chado<sp/>functions<sp/>because<sp/>we&apos;re<sp/>in<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>tripal<sp/>module.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="d8/d09/tripal__feature__terms_8tpl_8php_1ad6d756efb764174cfe7a6e9abc97e3eb" kindref="member">$terms</ref><sp/>=<sp/><ref refid="dd/d88/group__tripal__chado__variables__api_1ga6d6af1f6e23e5bbfae0d7867ce09af5a" kindref="member">chado_generate_var</ref>(</highlight><highlight class="stringliteral">&apos;cvterm&apos;</highlight><highlight class="normal">,<sp/>$match,<sp/>array(</highlight><highlight class="stringliteral">&apos;return_array&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>TRUE));</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="d8/d09/tripal__feature__terms_8tpl_8php_1ad6d756efb764174cfe7a6e9abc97e3eb" kindref="member">$terms</ref>)<sp/>{</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="d8/d09/tripal__feature__terms_8tpl_8php_1ad6d756efb764174cfe7a6e9abc97e3eb" kindref="member">$terms</ref><sp/>=<sp/><ref refid="dd/d88/group__tripal__chado__variables__api_1gac2d1c767cf1cbff56908b2d6da178e65" kindref="member">chado_expand_var</ref>(<ref refid="d8/d09/tripal__feature__terms_8tpl_8php_1ad6d756efb764174cfe7a6e9abc97e3eb" kindref="member">$terms</ref>,<sp/></highlight><highlight class="stringliteral">&apos;field&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;cvterm.definition&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/><sp/>$num_terms<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/><sp/>$selected_term<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">;<sp/><sp/></highlight></codeline>
<codeline lineno="697"><highlight class="normal"></highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Let<sp/>the<sp/>user<sp/>select<sp/>from<sp/>any<sp/>matching<sp/>terms.<sp/>Sometimes<sp/>there<sp/>may<sp/>be</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>more<sp/>than<sp/>one<sp/>that<sp/>match.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal"><sp/>(<ref refid="d8/d09/tripal__feature__terms_8tpl_8php_1ad6d756efb764174cfe7a6e9abc97e3eb" kindref="member">$terms</ref><sp/>as<sp/>$term)<sp/>{</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Save<sp/>the<sp/>user<sp/>a<sp/>click<sp/>by<sp/>setting<sp/>the<sp/>default<sp/>value<sp/>as<sp/>1<sp/>if<sp/>there&apos;s</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>only<sp/>one<sp/>matching<sp/>term.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$default<sp/>=<sp/>FALSE;</highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$attrs<sp/>=<sp/>array();</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($num_terms<sp/>==<sp/>0<sp/>and<sp/>count(<ref refid="d8/d09/tripal__feature__terms_8tpl_8php_1ad6d756efb764174cfe7a6e9abc97e3eb" kindref="member">$terms</ref>)<sp/>==<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$default<sp/>=<sp/>TRUE;</highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$attrs<sp/>=<sp/>array(</highlight><highlight class="stringliteral">&apos;checked&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;checked&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$term_element_name<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;term-&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;cvterm_id;</highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;terms_list&apos;</highlight><highlight class="normal">][$term_element_name]<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;checkbox&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#title&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/><sp/>$term-&gt;name,</highlight></codeline>
<codeline lineno="713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#default_value&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$default,</highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#attributes&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$attrs,</highlight></codeline>
<codeline lineno="715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#description&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;&lt;b&gt;Vocabulary:&lt;/b&gt;<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;cv_id-&gt;name<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;<sp/>(&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;dbxref_id-&gt;db_id-&gt;name<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;)<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;cv_id-&gt;definition<sp/>.</highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&lt;br&gt;&lt;b&gt;Term:<sp/>&lt;/b&gt;<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;dbxref_id-&gt;db_id-&gt;name<sp/>.<sp/></highlight><highlight class="charliteral">&apos;:&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;dbxref_id-&gt;accession<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;.<sp/><sp/>&apos;</highlight><highlight class="normal"><sp/>.</highlight></codeline>
<codeline lineno="717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&lt;br&gt;&lt;b&gt;Definition:&lt;/b&gt;<sp/><sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>property_exists($term,<sp/></highlight><highlight class="stringliteral">&apos;definition&apos;</highlight><highlight class="normal">)<sp/>?<sp/>$term-&gt;definition<sp/>:<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#ajax&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>array(</highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;callback&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&quot;tripal_get_term_lookup_form_ajax_callback&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;wrapper&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$ajax_wrapper_id,</highlight></codeline>
<codeline lineno="721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;effect&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;fade&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;method&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;replace&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>),</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="725"><highlight class="normal"></highlight></codeline>
<codeline lineno="726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(array_key_exists(</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">,<sp/>$form_state)<sp/>and<sp/>array_key_exists($term_element_name,<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">])<sp/>and</highlight></codeline>
<codeline lineno="727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][$term_element_name]<sp/>==<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$selected_term<sp/>=<sp/>$term;</highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$num_terms++;</highlight></codeline>
<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Next<sp/>find<sp/>terms<sp/>that<sp/>are<sp/>synonyms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/><sp/><sp/>$match<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;synonym&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$term_name,</highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/>$termsyn<sp/>=<sp/><ref refid="dd/d88/group__tripal__chado__variables__api_1ga6d6af1f6e23e5bbfae0d7867ce09af5a" kindref="member">chado_generate_var</ref>(</highlight><highlight class="stringliteral">&apos;cvtermsynonym&apos;</highlight><highlight class="normal">,<sp/>$match,<sp/>array(</highlight><highlight class="stringliteral">&apos;return_array&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>TRUE));</highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Let<sp/>the<sp/>user<sp/>select<sp/>from<sp/>any<sp/>matching<sp/>terms.<sp/>Sometimes<sp/>there<sp/>may<sp/>be</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="739"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>more<sp/>than<sp/>one<sp/>that<sp/>match.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="740"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal"><sp/>($termsyn<sp/>as<sp/>$synonym)<sp/>{</highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$term<sp/>=<sp/>$synonym-&gt;cvterm_id;</highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Save<sp/>the<sp/>user<sp/>a<sp/>click<sp/>by<sp/>setting<sp/>the<sp/>default<sp/>value<sp/>as<sp/>1<sp/>if<sp/>there&apos;s</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>only<sp/>one<sp/>matching<sp/>term.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$default<sp/>=<sp/>FALSE;</highlight></codeline>
<codeline lineno="745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$attrs<sp/>=<sp/>array();</highlight></codeline>
<codeline lineno="746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($num_terms<sp/>==<sp/>0<sp/>and<sp/>count(<ref refid="d8/d09/tripal__feature__terms_8tpl_8php_1ad6d756efb764174cfe7a6e9abc97e3eb" kindref="member">$terms</ref>)<sp/>==<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$default<sp/>=<sp/>TRUE;</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$attrs<sp/>=<sp/>array(</highlight><highlight class="stringliteral">&apos;checked&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;checked&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$term_element_name<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;term-&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;cvterm_id;</highlight></codeline>
<codeline lineno="751"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;terms_list&apos;</highlight><highlight class="normal">][$term_element_name]<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;checkbox&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#title&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/><sp/>$term-&gt;name,</highlight></codeline>
<codeline lineno="754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#default_value&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$default,</highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#attributes&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$attrs,</highlight></codeline>
<codeline lineno="756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#description&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;&lt;b&gt;Vocabulary:&lt;/b&gt;<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;cv_id-&gt;name<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;<sp/>(&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;dbxref_id-&gt;db_id-&gt;name<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;)<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;cv_id-&gt;definition<sp/>.</highlight></codeline>
<codeline lineno="757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&lt;br&gt;&lt;b&gt;Term:<sp/>&lt;/b&gt;<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;dbxref_id-&gt;db_id-&gt;name<sp/>.<sp/></highlight><highlight class="charliteral">&apos;:&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;dbxref_id-&gt;accession<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;.<sp/><sp/>&apos;</highlight><highlight class="normal"><sp/>.</highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&lt;br&gt;&lt;b&gt;Definition:&lt;/b&gt;<sp/><sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;definition<sp/>.<sp/></highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&lt;br&gt;&lt;b&gt;Synonym:&lt;/b&gt;<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>$synonym-&gt;synonym,</highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#ajax&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>array(</highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;callback&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&quot;tripal_get_term_lookup_form_ajax_callback&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;wrapper&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$ajax_wrapper_id,</highlight></codeline>
<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;effect&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;fade&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;method&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;replace&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>),</highlight></codeline>
<codeline lineno="766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(array_key_exists(</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">,<sp/>$form_state)<sp/>and<sp/>array_key_exists($term_element_name,<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">])<sp/>and</highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][$term_element_name]<sp/>==<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$selected_term<sp/>=<sp/>$term;</highlight></codeline>
<codeline lineno="771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$num_terms++;</highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($num_terms<sp/>==<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;terms_list&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;none&apos;</highlight><highlight class="normal">]<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;item&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#markup&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;&lt;i&gt;&apos;</highlight><highlight class="normal"><sp/>.<sp/>t(</highlight><highlight class="stringliteral">&apos;There<sp/>is<sp/>no<sp/>term<sp/>that<sp/>matches<sp/>the<sp/>entered<sp/>text.&apos;</highlight><highlight class="normal">)<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;&lt;/i&gt;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="783"><highlight class="normal">}</highlight></codeline>
<codeline lineno="784"><highlight class="normal"></highlight></codeline>
<codeline lineno="803" refid="de/d00/group__tripal__terms__api_1gaf444a2b8245c58e2402ead6d39e52fcd" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1gaf444a2b8245c58e2402ead6d39e52fcd" kindref="member">tripal_get_term_lookup_form_result</ref>(<ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>,<sp/>$form_state,<sp/>$field_name<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>$delta<sp/>=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="804"><highlight class="normal"><sp/><sp/><ref refid="dd/d72/tripal__library__features_8tpl_8php_1affc45c6ace2eeb3f300b054dbf9592b6" kindref="member">$values</ref><sp/>=<sp/>array();</highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/>$selected<sp/>=<sp/>array();</highlight></codeline>
<codeline lineno="806"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($field_name)<sp/>{</highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(array_key_exists(</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">,<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][$field_name][</highlight><highlight class="stringliteral">&apos;und&apos;</highlight><highlight class="normal">][$delta])<sp/>and<sp/></highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>array_key_exists(</highlight><highlight class="stringliteral">&apos;terms_list&apos;</highlight><highlight class="normal">,<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][$field_name][</highlight><highlight class="stringliteral">&apos;und&apos;</highlight><highlight class="normal">][$delta][</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">]))<sp/>{</highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="dd/d72/tripal__library__features_8tpl_8php_1affc45c6ace2eeb3f300b054dbf9592b6" kindref="member">$values</ref><sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][$field_name][</highlight><highlight class="stringliteral">&apos;und&apos;</highlight><highlight class="normal">][$delta][</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;terms_list&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="812"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dd/d72/tripal__library__features_8tpl_8php_1affc45c6ace2eeb3f300b054dbf9592b6" kindref="member">$values</ref><sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="814"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="815"><highlight class="normal"></highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_array(<ref refid="dd/d72/tripal__library__features_8tpl_8php_1affc45c6ace2eeb3f300b054dbf9592b6" kindref="member">$values</ref>))<sp/>{</highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal"><sp/>(<ref refid="dd/d72/tripal__library__features_8tpl_8php_1affc45c6ace2eeb3f300b054dbf9592b6" kindref="member">$values</ref><sp/>as<sp/>$key<sp/>=&gt;<sp/>$value)<sp/>{</highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$matches<sp/>=<sp/>array();</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(preg_match(</highlight><highlight class="stringliteral">&quot;/^term-(\d+)$/&quot;</highlight><highlight class="normal">,<sp/>$key,<sp/>$matches)<sp/>and<sp/><ref refid="dd/d72/tripal__library__features_8tpl_8php_1affc45c6ace2eeb3f300b054dbf9592b6" kindref="member">$values</ref>[</highlight><highlight class="stringliteral">&apos;term-&apos;</highlight><highlight class="normal"><sp/>.<sp/>$matches[1]])<sp/>{</highlight></codeline>
<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$cvterm_id<sp/>=<sp/>$matches[1];</highlight></codeline>
<codeline lineno="821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$selected[]<sp/>=<sp/><ref refid="dd/d88/group__tripal__chado__variables__api_1ga6d6af1f6e23e5bbfae0d7867ce09af5a" kindref="member">chado_generate_var</ref>(</highlight><highlight class="stringliteral">&apos;cvterm&apos;</highlight><highlight class="normal">,<sp/>array(</highlight><highlight class="stringliteral">&apos;cvterm_id&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$cvterm_id));</highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$selected;</highlight></codeline>
<codeline lineno="826"><highlight class="normal">}</highlight></codeline>
<codeline lineno="827"><highlight class="normal"></highlight></codeline>
<codeline lineno="833" refid="de/d00/group__tripal__terms__api_1gab4d1150cac6c95c8006abaa243cf10f9" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d00/group__tripal__terms__api_1gab4d1150cac6c95c8006abaa243cf10f9" kindref="member">tripal_get_term_lookup_form_ajax_callback</ref>(<ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>,<sp/>$form_state)<sp/>{</highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/>$ajax_wrapper_id<sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;triggering_element&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;#ajax&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;wrapper&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/>$field_name<sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;storage&apos;</highlight><highlight class="normal">][$ajax_wrapper_id][</highlight><highlight class="stringliteral">&apos;term_match_field&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/>$delta<sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;storage&apos;</highlight><highlight class="normal">][$ajax_wrapper_id][</highlight><highlight class="stringliteral">&apos;term_match_delta&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>this<sp/>form<sp/>is<sp/>in<sp/>a<sp/>field<sp/>then<sp/>we<sp/>need<sp/>to<sp/>dig<sp/>a<sp/>bit<sp/>deeper<sp/>to<sp/>return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>form<sp/>elements.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="841"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($field_name)<sp/>{</highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[$field_name][</highlight><highlight class="stringliteral">&apos;und&apos;</highlight><highlight class="normal">][$delta][</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="843"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="844"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;term_match&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="846"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="847"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="tripal/api/tripal.terms.api.inc"/>
  </compounddef>
</doxygen>
