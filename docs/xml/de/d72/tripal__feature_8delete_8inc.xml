<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.15">
  <compounddef id="de/d72/tripal__feature_8delete_8inc" kind="file" language="PHP">
    <compoundname>tripal_feature.delete.inc</compoundname>
      <sectiondef kind="func">
      <memberdef kind="function" id="de/d72/tripal__feature_8delete_8inc_1ae105db6280adff2016023a3dff53999e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_feature_delete_features</definition>
        <argsstring>($organism_id, $analysis_id, $seq_type, $is_unique, $feature_names, $job=NULL)</argsstring>
        <name>tripal_feature_delete_features</name>
        <param>
          <declname>$organism_id</declname>
        </param>
        <param>
          <declname>$analysis_id</declname>
        </param>
        <param>
          <declname>$seq_type</declname>
        </param>
        <param>
          <declname>$is_unique</declname>
        </param>
        <param>
          <declname>$feature_names</declname>
        </param>
        <param>
          <declname>$job</declname>
          <defval>NULL</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Function to actually delete the features indicated</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$organism_id</parametername>
</parameternamelist>
<parameterdescription>
<para>(Optional) The organism_id of the features to delete </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$analysis_id</parametername>
</parameternamelist>
<parameterdescription>
<para>(Optional) The analysis_id of the features to delete </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$seq_type</parametername>
</parameternamelist>
<parameterdescription>
<para>(Optional) The cvterm.name of the feature types to delete </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$is_unique</parametername>
</parameternamelist>
<parameterdescription>
<para>(Optional) A Boolean stating whether the names are unique (ie: feature.uniquename) or not (ie: feature.name) </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$feature_names</parametername>
</parameternamelist>
<parameterdescription>
<para>(Optional) A space separated list of the names of features to delete </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$job</parametername>
</parameternamelist>
<parameterdescription>
<para>The tripal_job id </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="legacy/tripal_feature/includes/tripal_feature.delete.inc" line="116" column="1" bodyfile="legacy/tripal_feature/includes/tripal_feature.delete.inc" bodystart="116" bodyend="206"/>
      </memberdef>
      <memberdef kind="function" id="de/d72/tripal__feature_8delete_8inc_1aa56b8e3dc5f3cbee7a82ffc0f5ac4a93" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_feature_delete_form</definition>
        <argsstring>()</argsstring>
        <name>tripal_feature_delete_form</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>A form for indicating the features to delete </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="legacy/tripal_feature/includes/tripal_feature.delete.inc" line="12" column="1" bodyfile="legacy/tripal_feature/includes/tripal_feature.delete.inc" bodystart="12" bodyend="59"/>
      </memberdef>
      <memberdef kind="function" id="de/d72/tripal__feature_8delete_8inc_1a25dd7baf9033e1f00955236416356c8e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_feature_delete_form_submit</definition>
        <argsstring>($form, &amp;$form_state)</argsstring>
        <name>tripal_feature_delete_form_submit</name>
        <param>
          <declname>$form</declname>
        </param>
        <param>
          <type>&amp;</type>
          <declname>$form_state</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Submit for the delete features form </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="legacy/tripal_feature/includes/tripal_feature.delete.inc" line="83" column="1" bodyfile="legacy/tripal_feature/includes/tripal_feature.delete.inc" bodystart="83" bodyend="95"/>
      </memberdef>
      <memberdef kind="function" id="de/d72/tripal__feature_8delete_8inc_1adef2940ad165e450ff7d530c8e365679" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_feature_delete_form_validate</definition>
        <argsstring>($form, &amp;$form_state)</argsstring>
        <name>tripal_feature_delete_form_validate</name>
        <param>
          <declname>$form</declname>
        </param>
        <param>
          <type>&amp;</type>
          <declname>$form_state</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Validation for the delete features form </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="legacy/tripal_feature/includes/tripal_feature.delete.inc" line="66" column="1" bodyfile="legacy/tripal_feature/includes/tripal_feature.delete.inc" bodystart="66" bodyend="76"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>Administration Interface for deleting multiple features </para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal">&lt;?php</highlight></codeline>
<codeline lineno="12" refid="de/d72/tripal__feature_8delete_8inc_1aa56b8e3dc5f3cbee7a82ffc0f5ac4a93" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d72/tripal__feature_8delete_8inc_1aa56b8e3dc5f3cbee7a82ffc0f5ac4a93" kindref="member">tripal_feature_delete_form</ref>()<sp/>{</highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;desc&apos;</highlight><highlight class="normal">]<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#markup&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&quot;Use<sp/>one<sp/>or<sp/>more<sp/>of<sp/>the<sp/>following<sp/>fields<sp/>to<sp/>identify<sp/>sets<sp/>of<sp/>features<sp/>to<sp/>be<sp/>deleted.&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/>);</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;feature_names&apos;</highlight><highlight class="normal">]=<sp/>array(</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;textarea&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#title&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Feature<sp/>Names&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#description&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Please<sp/>provide<sp/>a<sp/>list<sp/>of<sp/>feature<sp/>names<sp/>or<sp/>unique<sp/>names,</highlight></codeline>
<codeline lineno="21"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>separated<sp/>by<sp/>spaces<sp/>or<sp/>by<sp/>new<sp/>lines<sp/>to<sp/>be<sp/>delete.<sp/>If<sp/>you<sp/>specify<sp/>feature<sp/>names<sp/>then</highlight></codeline>
<codeline lineno="22"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all<sp/>other<sp/>options<sp/>below<sp/>will<sp/>be<sp/>ignored<sp/>(except<sp/>the<sp/>unique<sp/>checkbox).&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/>);</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;is_unique&apos;</highlight><highlight class="normal">]<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#title&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Names<sp/>are<sp/>Unique<sp/>Names&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;checkbox&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#description&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Select<sp/>this<sp/>checbox<sp/>if<sp/>the<sp/>names<sp/>listed<sp/>in<sp/>the<sp/>feature</highlight></codeline>
<codeline lineno="28"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>names<sp/>box<sp/>above<sp/>are<sp/>the<sp/>unique<sp/>name<sp/>of<sp/>the<sp/>feature<sp/>rather<sp/>than<sp/>the<sp/>human<sp/>readable<sp/>names.&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/>);</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/>$cv<sp/>=<sp/><ref refid="d1/d3c/group__tripal__chado__module__DEPRECATED__api_1ga9f03e9576873f620ecd0435f81add17d" kindref="member">tripal_get_cv</ref>(array(</highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;sequence&apos;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;seq_type&apos;</highlight><highlight class="normal">]=<sp/>array(</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#title&apos;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Feature<sp/>Type&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;textfield&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#description&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&quot;Choose<sp/>the<sp/>feature<sp/>type.&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#autocomplete_path&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&quot;admin/tripal/storage/chado/auto_name/cvterm/$cv-&gt;cv_id&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/>);</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/>$organisms<sp/>=<sp/><ref refid="d1/d3c/group__tripal__chado__module__DEPRECATED__api_1ga5210a45a7feaaa9aeb5f843c72230e56" kindref="member">tripal_get_organism_select_options</ref>(FALSE);</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;organism_id&apos;</highlight><highlight class="normal">]<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#title&apos;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Organism&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;select&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#description&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&quot;Choose<sp/>the<sp/>organism<sp/>for<sp/>which<sp/>features<sp/>will<sp/>be<sp/>deleted.&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#options&apos;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>=&gt;<sp/>$organisms,</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/>);</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><ref refid="d4/ddd/tripal__feature__analyses_8tpl_8php_1ab4c3338e3214d5ee58607590b3217f65" kindref="member">$analyses</ref><sp/>=<sp/><ref refid="d1/d3c/group__tripal__chado__module__DEPRECATED__api_1gad47ad4531a391dd0c12e9da533b76f98" kindref="member">tripal_get_analysis_select_options</ref>(FALSE);</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;analysis_id&apos;</highlight><highlight class="normal">]<sp/>=<sp/>array<sp/>(</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#title&apos;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Analysis&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;select&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#description&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&quot;Choose<sp/>the<sp/>analysis<sp/>for<sp/>which<sp/>associated<sp/>features<sp/>will<sp/>be<sp/>deleted.&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#options&apos;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>=&gt;<sp/><ref refid="d4/ddd/tripal__feature__analyses_8tpl_8php_1ab4c3338e3214d5ee58607590b3217f65" kindref="member">$analyses</ref>,</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/>);</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>[</highlight><highlight class="stringliteral">&apos;button&apos;</highlight><highlight class="normal">]<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;submit&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;#value&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Delete<sp/>Features&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/>);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>;</highlight></codeline>
<codeline lineno="59"><highlight class="normal">}</highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight></codeline>
<codeline lineno="66" refid="de/d72/tripal__feature_8delete_8inc_1adef2940ad165e450ff7d530c8e365679" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d72/tripal__feature_8delete_8inc_1adef2940ad165e450ff7d530c8e365679" kindref="member">tripal_feature_delete_form_validate</ref>(<ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>,<sp/>&amp;$form_state)<sp/>{</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/>$organism_id<sp/><sp/><sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;organism_id&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/>$seq_type<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>trim($form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;seq_type&apos;</highlight><highlight class="normal">]);</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/>$analysis_id<sp/><sp/><sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;analysis_id&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/>$is_unique<sp/><sp/><sp/><sp/><sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;is_unique&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/>$feature_names<sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;feature_names&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$analysis_id<sp/>and<sp/>!$organism_id<sp/>and<sp/>!$seq_type<sp/>and<sp/>!$feature_names)<sp/>{</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/>form_set_error(</highlight><highlight class="stringliteral">&apos;feature_names&apos;</highlight><highlight class="normal">,<sp/>t(</highlight><highlight class="stringliteral">&quot;Please<sp/>select<sp/>at<sp/>least<sp/>one<sp/>option&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="76"><highlight class="normal">}</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="83" refid="de/d72/tripal__feature_8delete_8inc_1a25dd7baf9033e1f00955236416356c8e" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d72/tripal__feature_8delete_8inc_1a25dd7baf9033e1f00955236416356c8e" kindref="member">tripal_feature_delete_form_submit</ref>(<ref refid="de/d3f/tripal__bulk__loader__base_8tpl_8php_1a24227bb4b9c4c11f6f138476251ff34c" kindref="member">$form</ref>,<sp/>&amp;$form_state)<sp/>{</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/>global<sp/>$user;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/>$organism_id<sp/><sp/><sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;organism_id&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/>$seq_type<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>trim($form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;seq_type&apos;</highlight><highlight class="normal">]);</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/>$analysis_id<sp/><sp/><sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;analysis_id&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/>$is_unique<sp/><sp/><sp/><sp/><sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;is_unique&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/>$feature_names<sp/>=<sp/>$form_state[</highlight><highlight class="stringliteral">&apos;values&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;feature_names&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/>$args<sp/>=<sp/>array($organism_id,<sp/>$analysis_id,<sp/>$seq_type,<sp/>$is_unique,<sp/>$feature_names);</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><ref refid="d0/db7/group__tripal__jobs__api_1gae7fa345a83829ddc37f727c8d04c02d6" kindref="member">tripal_add_job</ref>(</highlight><highlight class="stringliteral">&quot;Delete<sp/>features&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;tripal_feature&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;tripal_feature_delete_features&apos;</highlight><highlight class="normal">,<sp/>$args,<sp/>$user-&gt;uid);</highlight></codeline>
<codeline lineno="95"><highlight class="normal">}</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="116" refid="de/d72/tripal__feature_8delete_8inc_1ae105db6280adff2016023a3dff53999e" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="de/d72/tripal__feature_8delete_8inc_1ae105db6280adff2016023a3dff53999e" kindref="member">tripal_feature_delete_features</ref>($organism_id,<sp/>$analysis_id,<sp/>$seq_type,</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/>$is_unique,<sp/>$feature_names,<sp/>$job<sp/>=<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/>global<sp/>$user;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/>$match<sp/>=<sp/>array();</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Begin<sp/>the<sp/>transaction.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/>$transaction<sp/>=<sp/>db_transaction();</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/>print<sp/></highlight><highlight class="stringliteral">&quot;\nNOTE:<sp/>Deleting<sp/>features<sp/>is<sp/>performed<sp/>using<sp/>a<sp/>database<sp/>transaction.<sp/>\n&quot;</highlight><highlight class="normal"><sp/>.</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;If<sp/>the<sp/>load<sp/>fails<sp/>or<sp/>is<sp/>terminated<sp/>prematurely<sp/>then<sp/>the<sp/>entire<sp/>set<sp/>of<sp/>\n&quot;</highlight><highlight class="normal"><sp/>.</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;deletions<sp/>is<sp/>rolled<sp/>back<sp/>and<sp/>will<sp/>not<sp/>be<sp/>found<sp/>in<sp/>the<sp/>database\n\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>feature<sp/>names<sp/>have<sp/>been<sp/>provided<sp/>then<sp/>handle<sp/>those</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($feature_names)<sp/>{</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$names<sp/>=<sp/>preg_split(</highlight><highlight class="stringliteral">&apos;/\s+/&apos;</highlight><highlight class="normal">,<sp/>$feature_names);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">($names)<sp/>==<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$names<sp/>=<sp/>$names[0];</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($is_unique)<sp/>{</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$match[</highlight><highlight class="stringliteral">&apos;uniquename&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$names;</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$match[</highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$names;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$num_deletes<sp/>=<sp/><ref refid="de/dc4/group__tripal__chado__query__api_1gad84b24dc3ed2e18b053977221f997a35" kindref="member">chado_select_record</ref>(</highlight><highlight class="stringliteral">&apos;feature&apos;</highlight><highlight class="normal">,<sp/>array(</highlight><highlight class="stringliteral">&apos;count(*)<sp/>as<sp/>cnt&apos;</highlight><highlight class="normal">),<sp/>$match);</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>print<sp/></highlight><highlight class="stringliteral">&quot;Deleting<sp/>&quot;</highlight><highlight class="normal"><sp/>.<sp/>$num_deletes[0]-&gt;cnt<sp/>.<sp/></highlight><highlight class="stringliteral">&quot;<sp/>features\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="de/dc4/group__tripal__chado__query__api_1gaad9a3b9f75cdf27faac5d05d39d4831d" kindref="member">chado_delete_record</ref>(</highlight><highlight class="stringliteral">&apos;feature&apos;</highlight><highlight class="normal">,<sp/>$match);</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now<sp/>handle<sp/>the<sp/>combintation<sp/>of<sp/>all<sp/>other<sp/>inputs.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/>$args<sp/>=<sp/>array();</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/>$sql<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/>$join<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/>$where<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($analysis_id)<sp/>{</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$join<sp/>.=<sp/></highlight><highlight class="stringliteral">&apos;INNER<sp/>JOIN<sp/>{analysisfeature}<sp/>AF<sp/>on<sp/>F.feature_id<sp/>=<sp/>AF.feature_id<sp/>&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$join<sp/>.=<sp/></highlight><highlight class="stringliteral">&apos;INNER<sp/>JOIN<sp/>{analysis}<sp/>A<sp/>on<sp/>A.analysis_id<sp/>=<sp/>AF.analysis_id<sp/>&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$where<sp/>.=<sp/></highlight><highlight class="stringliteral">&apos;AND<sp/>A.analysis_id<sp/>=<sp/>:analysis_id<sp/>&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$args[</highlight><highlight class="stringliteral">&apos;:analysis_id&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$analysis_id;</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($organism_id)<sp/>{</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$where<sp/>.=<sp/></highlight><highlight class="stringliteral">&apos;AND<sp/>F.organism_id<sp/>=<sp/>:organism_id<sp/>&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$args[</highlight><highlight class="stringliteral">&apos;:organism_id&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$organism_id;</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($seq_type)<sp/>{</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$join<sp/>.=<sp/></highlight><highlight class="stringliteral">&apos;INNER<sp/>JOIN<sp/>{cvterm}<sp/>CVT<sp/>ON<sp/>CVT.cvterm_id<sp/>=<sp/>F.type_id&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$where<sp/>.=<sp/></highlight><highlight class="stringliteral">&apos;AND<sp/>CVT.name<sp/>=<sp/>:type_name&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$args[</highlight><highlight class="stringliteral">&apos;:type_name&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$seq_type;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Do<sp/>not<sp/>perform<sp/>a<sp/>delete<sp/>if<sp/>we<sp/>have<sp/>no<sp/>additions<sp/>to<sp/>the<sp/>where<sp/>clause</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>otherwise<sp/>all<sp/>features<sp/>will<sp/>be<sp/>deleted<sp/>and<sp/>this<sp/>is<sp/>probably<sp/>not<sp/>what</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>is<sp/>wanted.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$where)<sp/>{</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&apos;Cannot<sp/>delete<sp/>features<sp/>as<sp/>no<sp/>filters<sp/>are<sp/>available&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>First,<sp/>count<sp/>the<sp/>number<sp/>of<sp/>records<sp/>to<sp/>be<sp/>deleted</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/>$sql<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;</highlight></codeline>
<codeline lineno="177"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>SELECT<sp/>count(F.feature_id)</highlight></codeline>
<codeline lineno="178"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>FROM<sp/>{feature}<sp/>F</highlight></codeline>
<codeline lineno="179"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$join</highlight></codeline>
<codeline lineno="180"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>WHERE<sp/>1=1<sp/>$where</highlight></codeline>
<codeline lineno="181"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/>$num_deleted<sp/>=<sp/><ref refid="de/dc4/group__tripal__chado__query__api_1ga73e802bb6e6daa31f712682939c270fb" kindref="member">chado_query</ref>($sql,<sp/>$args)-&gt;fetchField();</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Second,<sp/>delete<sp/>the<sp/>records.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/>$sql<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;</highlight></codeline>
<codeline lineno="185"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>DELETE<sp/>FROM<sp/>{feature}<sp/>WHERE<sp/>feature_id<sp/>IN<sp/>(</highlight></codeline>
<codeline lineno="186"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SELECT<sp/>F.feature_id</highlight></codeline>
<codeline lineno="187"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FROM<sp/>{feature}<sp/>F</highlight></codeline>
<codeline lineno="188"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$join</highlight></codeline>
<codeline lineno="189"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WHERE<sp/>1=1<sp/>$where</highlight></codeline>
<codeline lineno="190"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="191"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="de/dc4/group__tripal__chado__query__api_1ga73e802bb6e6daa31f712682939c270fb" kindref="member">chado_query</ref>($sql,<sp/>$args);</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/>print<sp/></highlight><highlight class="stringliteral">&quot;Deletiong<sp/>completed<sp/>successfully.<sp/>Deleted<sp/>$num_deleted<sp/>feature(s).\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/>print<sp/></highlight><highlight class="stringliteral">&quot;Now<sp/>removing<sp/>orphaned<sp/>feature<sp/>pages\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="d8/d43/group__tripal__legacy__chado__node__api_1ga742e5f56a6a2ed5b826e0a3b557349a2" kindref="member">chado_cleanup_orphaned_nodes</ref>(</highlight><highlight class="stringliteral">&apos;feature&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">catch</highlight><highlight class="normal"><sp/>(Exception<sp/>$e)<sp/>{</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/>print<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>make<sp/>sure<sp/>we<sp/>start<sp/>errors<sp/>on<sp/>new<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/>$transaction-&gt;rollback();</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/>print<sp/></highlight><highlight class="stringliteral">&quot;FAILED:<sp/>Rolling<sp/>back<sp/>database<sp/>changes...\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/>watchdog_exception(</highlight><highlight class="stringliteral">&apos;tripal_feature&apos;</highlight><highlight class="normal">,<sp/>$e);</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/>print<sp/></highlight><highlight class="stringliteral">&quot;\nDone\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="206"><highlight class="normal">}</highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="legacy/tripal_feature/includes/tripal_feature.delete.inc"/>
  </compounddef>
</doxygen>
