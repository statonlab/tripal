<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.15">
  <compounddef id="df/d73/tripal__chado_8migrate_8api_8inc" kind="file" language="PHP">
    <compoundname>tripal_chado.migrate.api.inc</compoundname>
      <sectiondef kind="func">
      <memberdef kind="function" id="d4/d37/group__tripal__chado__migrate__api_1ga5d161e0cae8f0bf8448e9377c46d7da7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>chado_migrate_tripal_content_type</definition>
        <argsstring>($type=array())</argsstring>
        <name>chado_migrate_tripal_content_type</name>
        <param>
          <declname>$type</declname>
          <defval>array()</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Migrate Tripal content types</para><para>Migrate specified Tripal content type and publish all its content. The content type will be created if it does not already exist.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$type</parametername>
</parameternamelist>
<parameterdescription>
<para>A type array specifying the vocabular, accession, term_name, and chado data_table e.g. $type = array( &apos;vocabulary&apos; =&gt; &apos;OBI&apos;, &apos;accession&apos; =&gt; &apos;0100026&apos;, &apos;term_name&apos; =&gt; &apos;organism&apos;, &apos;storage_args&apos; =&gt; array ( &apos;data_table&apos; =&gt; $table ) ) </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal_chado/api/tripal_chado.migrate.api.inc" line="34" column="1" bodyfile="tripal_chado/api/tripal_chado.migrate.api.inc" bodystart="34" bodyend="53"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>Provides an application programming interface (API) to migrate content. </para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal">&lt;?php<sp/></highlight></codeline>
<codeline lineno="34" refid="d4/d37/group__tripal__chado__migrate__api_1ga5d161e0cae8f0bf8448e9377c46d7da7" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="d4/d37/group__tripal__chado__migrate__api_1ga5d161e0cae8f0bf8448e9377c46d7da7" kindref="member">chado_migrate_tripal_content_type</ref>($type<sp/>=<sp/>array())<sp/>{</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>if<sp/>the<sp/>term<sp/>already<sp/>exists.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/>$term<sp/>=<sp/><ref refid="d5/dce/group__tripal__entities__api_1ga8d7df332ef5e92725a5044692e85ead2" kindref="member">tripal_load_term_entity</ref>($type);</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>term<sp/>doesn&apos;t<sp/>exist,<sp/>create<sp/>a<sp/>new<sp/>bundle<sp/>for<sp/>this<sp/>term.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$term)<sp/>{</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;Creating<sp/>bundle<sp/>for<sp/>term<sp/>&apos;&quot;</highlight><highlight class="normal"><sp/>.<sp/>$type[</highlight><highlight class="stringliteral">&apos;term_name&apos;</highlight><highlight class="normal">]<sp/>.<sp/></highlight><highlight class="stringliteral">&quot;&apos;...\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/>$success<sp/>=<sp/><ref refid="d5/dce/group__tripal__entities__api_1gae741bc8f60274eee9fbe4e2ca062fe83" kindref="member">tripal_create_bundle</ref>($type);</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/>$term<sp/>=<sp/><ref refid="d5/dce/group__tripal__entities__api_1ga8d7df332ef5e92725a5044692e85ead2" kindref="member">tripal_load_term_entity</ref>($type);</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>bundle<sp/>name.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/>$bundle_name<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;bio_data_&apos;</highlight><highlight class="normal"><sp/>.<sp/>$term-&gt;id;</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Publish<sp/>records<sp/>for<sp/>the<sp/>bundle.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/>$value<sp/>=<sp/>array(</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;sync_node&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>1,</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;bundle_name&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$bundle_name</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/>);</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><ref refid="d5/db8/group__tripal__chado__api_1gaf3e6c2a98f3e9ca76d67cbda86a0fe2b" kindref="member">chado_publish_records</ref>($value);</highlight></codeline>
<codeline lineno="53"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="tripal_chado/api/tripal_chado.migrate.api.inc"/>
  </compounddef>
</doxygen>
