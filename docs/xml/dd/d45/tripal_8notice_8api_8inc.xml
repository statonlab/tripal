<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.15">
  <compounddef id="dd/d45/tripal_8notice_8api_8inc" kind="file" language="PHP">
    <compoundname>tripal.notice.api.inc</compoundname>
      <sectiondef kind="var">
      <memberdef kind="variable" id="dd/d45/tripal_8notice_8api_8inc_1ab6b50101c7d1777273f1280e73ef8697" prot="public" static="no" mutable="no">
        <type>const</type>
        <definition>const TRIPAL_CRITICAL</definition>
        <argsstring></argsstring>
        <name>TRIPAL_CRITICAL</name>
        <initializer>2</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.notice.api.inc" line="22" column="1" bodyfile="tripal/api/tripal.notice.api.inc" bodystart="22" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="dd/d45/tripal_8notice_8api_8inc_1a4199d13e9eb402a5881442421a0d8099" prot="public" static="no" mutable="no">
        <type>const</type>
        <definition>const TRIPAL_DEBUG</definition>
        <argsstring></argsstring>
        <name>TRIPAL_DEBUG</name>
        <initializer>7</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.notice.api.inc" line="27" column="1" bodyfile="tripal/api/tripal.notice.api.inc" bodystart="27" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="dd/d45/tripal_8notice_8api_8inc_1a4b04c4b1ce52da710d57abf5c4b09dd3" prot="public" static="no" mutable="no">
        <type>const</type>
        <definition>const TRIPAL_ERROR</definition>
        <argsstring></argsstring>
        <name>TRIPAL_ERROR</name>
        <initializer>3</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.notice.api.inc" line="23" column="1" bodyfile="tripal/api/tripal.notice.api.inc" bodystart="23" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="dd/d45/tripal_8notice_8api_8inc_1ae3246842a9b0bc4b8ecf2951cb1a949a" prot="public" static="no" mutable="no">
        <type>const</type>
        <definition>const TRIPAL_INFO</definition>
        <argsstring></argsstring>
        <name>TRIPAL_INFO</name>
        <initializer>6</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.notice.api.inc" line="26" column="1" bodyfile="tripal/api/tripal.notice.api.inc" bodystart="26" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="dd/d45/tripal_8notice_8api_8inc_1ad9759873be1ae0c3d8ccc37d121aeb3c" prot="public" static="no" mutable="no">
        <type>const</type>
        <definition>const TRIPAL_NOTICE</definition>
        <argsstring></argsstring>
        <name>TRIPAL_NOTICE</name>
        <initializer>5</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.notice.api.inc" line="25" column="1" bodyfile="tripal/api/tripal.notice.api.inc" bodystart="25" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="dd/d45/tripal_8notice_8api_8inc_1a179264461824ee52a7a08ebef9150e4b" prot="public" static="no" mutable="no">
        <type>const</type>
        <definition>const TRIPAL_WARNING</definition>
        <argsstring></argsstring>
        <name>TRIPAL_WARNING</name>
        <initializer>4</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.notice.api.inc" line="24" column="1" bodyfile="tripal/api/tripal.notice.api.inc" bodystart="24" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="d9/dae/group__tripal__notify__api_1ga8efe83b992f867af4a09830e67800368" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_log</definition>
        <argsstring>($message, $type=&apos;error&apos;, $options=array())</argsstring>
        <name>tripal_log</name>
        <param>
          <declname>$message</declname>
        </param>
        <param>
          <declname>$type</declname>
          <defval>&apos;error&apos;</defval>
        </param>
        <param>
          <declname>$options</declname>
          <defval>array()</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>File-based logging for Tripal.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$message</parametername>
</parameternamelist>
<parameterdescription>
<para>The message to be logged. Need not contain date/time information. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$log_type</parametername>
</parameternamelist>
<parameterdescription>
<para>The type of log. Should be one of &apos;error&apos; or &apos;job&apos; although other types are supported. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$options</parametername>
</parameternamelist>
<parameterdescription>
<para>An array of options where the following keys are supported:<itemizedlist>
<listitem><para>first_progress_bar: this sohuld be used for the first log call for a progress bar.</para></listitem><listitem><para>is_progress_bar: this option should be used for all but the first print of a progress bar to allow it all to be printed on the same line without intervening date prefixes. </para></listitem></itemizedlist>
</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The number of bytes that were written to the file, or FALSE on failure. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.notice.api.inc" line="253" column="1" bodyfile="tripal/api/tripal.notice.api.inc" bodystart="253" bodyend="267"/>
      </memberdef>
      <memberdef kind="function" id="d9/dae/group__tripal__notify__api_1ga2240e326e18c3074843ac815e4629ee2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_report_error</definition>
        <argsstring>($type, $severity, $message, $variables=array(), $options=array())</argsstring>
        <name>tripal_report_error</name>
        <param>
          <declname>$type</declname>
        </param>
        <param>
          <declname>$severity</declname>
        </param>
        <param>
          <declname>$message</declname>
        </param>
        <param>
          <declname>$variables</declname>
          <defval>array()</defval>
        </param>
        <param>
          <declname>$options</declname>
          <defval>array()</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Provide better error notice for Tripal.</para><para>If the environment variable &apos;TRIPAL_DEBUG&apos; is set to 1 then this function will add backtrace information to the message.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$type</parametername>
</parameternamelist>
<parameterdescription>
<para>The catagory to which this message belongs. Can be any string, but the general practice is to use the name of the module. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$severity</parametername>
</parameternamelist>
<parameterdescription>
<para>The severity of the message; one of the following values:<itemizedlist>
<listitem><para>TRIPAL_CRITICAL: Critical conditions.</para></listitem><listitem><para>TRIPAL_ERROR: Error conditions.</para></listitem><listitem><para>TRIPAL_WARNING: Warning conditions.</para></listitem><listitem><para>TRIPAL_NOTICE: (default) Normal but significant conditions.</para></listitem><listitem><para>TRIPAL_INFO: Informational messages.</para></listitem><listitem><para>TRIPAL_DEBUG: Debug-level messages. </para></listitem></itemizedlist>
</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$message</parametername>
</parameternamelist>
<parameterdescription>
<para>The message to store in the log. Keep $message translatable by not concatenating dynamic values into it! Variables in the message should be added by using placeholder strings alongside the variables argument to declare the value of the placeholders. See t() for documentation on how $message and $variables interact. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$variables</parametername>
</parameternamelist>
<parameterdescription>
<para>Array of variables to replace in the message on display or NULL if message is already translated or not possible to translate. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$options</parametername>
</parameternamelist>
<parameterdescription>
<para>An array of options. Some available options include:<itemizedlist>
<listitem><para>print: prints the error message to the terminal screen. Useful when display is the command-line</para></listitem><listitem><para>drupal_set_message: set to TRUE to call drupal_set_message with the same error. </para></listitem></itemizedlist>
</para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.notice.api.inc" line="66" column="1" bodyfile="tripal/api/tripal.notice.api.inc" bodystart="66" bodyend="153"/>
      </memberdef>
      <memberdef kind="function" id="d9/dae/group__tripal__notify__api_1ga8c4c41c79200e1d3c8145386f12eaa4e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_set_message</definition>
        <argsstring>($message, $importance=TRIPAL_INFO, $options=array())</argsstring>
        <name>tripal_set_message</name>
        <param>
          <declname>$message</declname>
        </param>
        <param>
          <declname>$importance</declname>
          <defval><ref refid="dd/d45/tripal_8notice_8api_8inc_1ae3246842a9b0bc4b8ecf2951cb1a949a" kindref="member">TRIPAL_INFO</ref></defval>
        </param>
        <param>
          <declname>$options</declname>
          <defval>array()</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Display messages to tripal administrators.</para><para>This can be used instead of drupal_set_message when you want to target tripal administrators.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$message</parametername>
</parameternamelist>
<parameterdescription>
<para>The message to be displayed to the tripal administrators. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$importance</parametername>
</parameternamelist>
<parameterdescription>
<para>The level of importance for this message. In the future this will be used to allow administrators to filter some of these messages. It can be one of the following:<itemizedlist>
<listitem><para>TRIPAL_CRITICAL: Critical conditions.</para></listitem><listitem><para>TRIPAL_ERROR: Error conditions.</para></listitem><listitem><para>TRIPAL_WARNING: Warning conditions.</para></listitem><listitem><para>TRIPAL_NOTICE: Normal but significant conditions.</para></listitem><listitem><para>TRIPAL_INFO: (default) Informational messages.</para></listitem><listitem><para>TRIPAL_DEBUG: Debug-level messages. </para></listitem></itemizedlist>
</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$options</parametername>
</parameternamelist>
<parameterdescription>
<para>Any options to apply to the current message. Supported options include:<itemizedlist>
<listitem><para>return_html: return HTML instead of setting a drupal message. This can be used to place a tripal message in a particular place in the page. The default is FALSE. </para></listitem></itemizedlist>
</para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal/api/tripal.notice.api.inc" line="181" column="1" bodyfile="tripal/api/tripal.notice.api.inc" bodystart="181" bodyend="231"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>Provides an application programming interface (API) for improved user notifications. These API functions can be used to set messages for end-users, administrators, or simple logging. </para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal">&lt;?php</highlight></codeline>
<codeline lineno="20"><highlight class="comment">//<sp/>Globals<sp/>used<sp/>by<sp/>Tripals<sp/>Error<sp/>catching<sp/>functions</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Should<sp/>match<sp/>those<sp/>defined<sp/>by<sp/>watchdog</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22" refid="dd/d45/tripal_8notice_8api_8inc_1ab6b50101c7d1777273f1280e73ef8697" refkind="member"><highlight class="normal">define(</highlight><highlight class="stringliteral">&apos;TRIPAL_CRITICAL&apos;</highlight><highlight class="normal">,2);</highlight></codeline>
<codeline lineno="23" refid="dd/d45/tripal_8notice_8api_8inc_1a4b04c4b1ce52da710d57abf5c4b09dd3" refkind="member"><highlight class="normal">define(</highlight><highlight class="stringliteral">&apos;TRIPAL_ERROR&apos;</highlight><highlight class="normal">,3);</highlight></codeline>
<codeline lineno="24" refid="dd/d45/tripal_8notice_8api_8inc_1a179264461824ee52a7a08ebef9150e4b" refkind="member"><highlight class="normal">define(</highlight><highlight class="stringliteral">&apos;TRIPAL_WARNING&apos;</highlight><highlight class="normal">,4);</highlight></codeline>
<codeline lineno="25" refid="dd/d45/tripal_8notice_8api_8inc_1ad9759873be1ae0c3d8ccc37d121aeb3c" refkind="member"><highlight class="normal">define(</highlight><highlight class="stringliteral">&apos;TRIPAL_NOTICE&apos;</highlight><highlight class="normal">,5);</highlight></codeline>
<codeline lineno="26" refid="dd/d45/tripal_8notice_8api_8inc_1ae3246842a9b0bc4b8ecf2951cb1a949a" refkind="member"><highlight class="normal">define(</highlight><highlight class="stringliteral">&apos;TRIPAL_INFO&apos;</highlight><highlight class="normal">,6);</highlight></codeline>
<codeline lineno="27" refid="dd/d45/tripal_8notice_8api_8inc_1a4199d13e9eb402a5881442421a0d8099" refkind="member"><highlight class="normal">define(</highlight><highlight class="stringliteral">&apos;TRIPAL_DEBUG&apos;</highlight><highlight class="normal">,7);</highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="66" refid="d9/dae/group__tripal__notify__api_1ga2240e326e18c3074843ac815e4629ee2" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="d9/dae/group__tripal__notify__api_1ga2240e326e18c3074843ac815e4629ee2" kindref="member">tripal_report_error</ref>($type,<sp/>$severity,<sp/>$message,<sp/>$variables<sp/>=<sp/>array(),<sp/><ref refid="d5/d66/tripal__organism__properties_8tpl_8php_1a011800c63ece4cbbfa77136a20607023" kindref="member">$options</ref><sp/>=<sp/>array())<sp/>{</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/>$suppress<sp/>=<sp/>getenv(</highlight><highlight class="stringliteral">&apos;TRIPAL_SUPPRESS_ERRORS&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(strtolower($suppress)<sp/>===<sp/></highlight><highlight class="stringliteral">&apos;true&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>human-readable<sp/>severity<sp/>string</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/>$severity_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>($severity)<sp/>{</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1ab6b50101c7d1777273f1280e73ef8697" kindref="member">TRIPAL_CRITICAL</ref>:</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$severity_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;CRITICAL&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a4b04c4b1ce52da710d57abf5c4b09dd3" kindref="member">TRIPAL_ERROR</ref>:</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$severity_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;ERROR&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a179264461824ee52a7a08ebef9150e4b" kindref="member">TRIPAL_WARNING</ref>:</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$severity_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;WARNING&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1ad9759873be1ae0c3d8ccc37d121aeb3c" kindref="member">TRIPAL_NOTICE</ref>:</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$severity_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;NOTICE&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1ae3246842a9b0bc4b8ecf2951cb1a949a" kindref="member">TRIPAL_INFO</ref>:</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$severity_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;INFO&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a4199d13e9eb402a5881442421a0d8099" kindref="member">TRIPAL_DEBUG</ref>:</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$severity_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;DEBUG&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>we<sp/>are<sp/>not<sp/>set<sp/>to<sp/>return<sp/>debugging<sp/>information<sp/>and<sp/>the<sp/>severity<sp/>string</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>is<sp/>debug<sp/>then<sp/>don&apos;t<sp/>report<sp/>the<sp/>error.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(($severity<sp/>==<sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a4199d13e9eb402a5881442421a0d8099" kindref="member">TRIPAL_DEBUG</ref>)<sp/>AND<sp/>(getenv(</highlight><highlight class="stringliteral">&apos;TRIPAL_DEBUG&apos;</highlight><highlight class="normal">)<sp/>!=<sp/>1))<sp/>{</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>FALSE;</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>backtrace<sp/>and<sp/>include<sp/>in<sp/>the<sp/>error<sp/>message,<sp/>but<sp/>only<sp/>if<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>TRIPAL_DEBUG<sp/>environment<sp/>variable<sp/>is<sp/>set.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(getenv(</highlight><highlight class="stringliteral">&apos;TRIPAL_DEBUG&apos;</highlight><highlight class="normal">)<sp/>==<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/>$backtrace<sp/>=<sp/>debug_backtrace();</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/>$message<sp/>.=<sp/></highlight><highlight class="stringliteral">&quot;\nBacktrace:\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/>$i<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>($i<sp/>=<sp/>1;<sp/>$i<sp/>&lt;<sp/>count($backtrace);<sp/>$i++)<sp/>{</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$function<sp/>=<sp/>$backtrace[$i];</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$message<sp/>.=<sp/></highlight><highlight class="stringliteral">&quot;<sp/><sp/>$i)<sp/>&quot;</highlight><highlight class="normal"><sp/>.<sp/>$function[</highlight><highlight class="stringliteral">&apos;function&apos;</highlight><highlight class="normal">]<sp/>.<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Send<sp/>to<sp/>watchdog.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/>watchdog($type,<sp/>$message,<sp/>$variables,<sp/>$severity);</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">catch</highlight><highlight class="normal"><sp/>(Exception<sp/>$e)<sp/>{</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/>print<sp/></highlight><highlight class="stringliteral">&quot;CRITICAL<sp/>(TRIPAL):<sp/>Unable<sp/>to<sp/>add<sp/>error<sp/>message<sp/>with<sp/>watchdog:<sp/>&quot;</highlight><highlight class="normal"><sp/>.<sp/>$e-&gt;getMessage().<sp/></highlight><highlight class="stringliteral">&quot;\n.&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="d5/d66/tripal__organism__properties_8tpl_8php_1a011800c63ece4cbbfa77136a20607023" kindref="member">$options</ref>[</highlight><highlight class="stringliteral">&apos;print&apos;</highlight><highlight class="normal">]<sp/>=<sp/>TRUE;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Format<sp/>the<sp/>message<sp/>for<sp/>printing<sp/>(either<sp/>to<sp/>the<sp/>screen,<sp/>log<sp/>or<sp/>both).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">($variables)<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/>$print_message<sp/>=<sp/>str_replace(array_keys($variables),<sp/>$variables,<sp/>$message);</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/>$print_message<sp/>=<sp/>$message;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>print<sp/>option<sp/>supplied<sp/>then<sp/>print<sp/>directly<sp/>to<sp/>the<sp/>screen.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isset(<ref refid="d5/d66/tripal__organism__properties_8tpl_8php_1a011800c63ece4cbbfa77136a20607023" kindref="member">$options</ref>[</highlight><highlight class="stringliteral">&apos;print&apos;</highlight><highlight class="normal">]))<sp/>{</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/>print<sp/>$severity_string<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;<sp/>(&apos;</highlight><highlight class="normal"><sp/>.<sp/>strtoupper($type)<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;):<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>$print_message<sp/>.<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isset(<ref refid="d5/d66/tripal__organism__properties_8tpl_8php_1a011800c63ece4cbbfa77136a20607023" kindref="member">$options</ref>[</highlight><highlight class="stringliteral">&apos;drupal_set_message&apos;</highlight><highlight class="normal">]))<sp/>{</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(in_array($severity,<sp/>[<ref refid="dd/d45/tripal_8notice_8api_8inc_1ab6b50101c7d1777273f1280e73ef8697" kindref="member">TRIPAL_CRITICAL</ref>,<sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a4b04c4b1ce52da710d57abf5c4b09dd3" kindref="member">TRIPAL_ERROR</ref>]))<sp/>{</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$status<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;error&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/>elseif<sp/>($severity<sp/>==<sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a179264461824ee52a7a08ebef9150e4b" kindref="member">TRIPAL_WARNING</ref>)<sp/>{</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$status<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;warning&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$status<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;status&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/>drupal_set_message($print_message,<sp/>$status);</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Print<sp/>to<sp/>the<sp/>Tripal<sp/>error<sp/>log<sp/>but<sp/>only<sp/>if<sp/>the<sp/>severity<sp/>is<sp/>not<sp/>info.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(($severity<sp/>!=<sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1ae3246842a9b0bc4b8ecf2951cb1a949a" kindref="member">TRIPAL_INFO</ref>))<sp/>{</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="d9/dae/group__tripal__notify__api_1ga8efe83b992f867af4a09830e67800368" kindref="member">tripal_log</ref>(</highlight><highlight class="charliteral">&apos;[&apos;</highlight><highlight class="normal"><sp/>.<sp/>strtoupper($type)<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;]<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>$print_message<sp/>.<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">,<sp/>$severity_string);</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal">}</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="181" refid="d9/dae/group__tripal__notify__api_1ga8c4c41c79200e1d3c8145386f12eaa4e" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="d9/dae/group__tripal__notify__api_1ga8c4c41c79200e1d3c8145386f12eaa4e" kindref="member">tripal_set_message</ref>($message,<sp/>$importance<sp/>=<sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1ae3246842a9b0bc4b8ecf2951cb1a949a" kindref="member">TRIPAL_INFO</ref>,<sp/><ref refid="d5/d66/tripal__organism__properties_8tpl_8php_1a011800c63ece4cbbfa77136a20607023" kindref="member">$options</ref><sp/>=<sp/>array())<sp/>{</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/>global<sp/>$user;</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Only<sp/>show<sp/>the<sp/>message<sp/>to<sp/>the<sp/>users<sp/>with<sp/>&apos;view<sp/>dev<sp/>helps&apos;<sp/>permission.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!user_access(</highlight><highlight class="stringliteral">&apos;view<sp/>dev<sp/>helps&apos;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>defaults.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><ref refid="d5/d66/tripal__organism__properties_8tpl_8php_1a011800c63ece4cbbfa77136a20607023" kindref="member">$options</ref>[</highlight><highlight class="stringliteral">&apos;return_html&apos;</highlight><highlight class="normal">]<sp/>=<sp/>(isset(<ref refid="d5/d66/tripal__organism__properties_8tpl_8php_1a011800c63ece4cbbfa77136a20607023" kindref="member">$options</ref>[</highlight><highlight class="stringliteral">&apos;return_html&apos;</highlight><highlight class="normal">]))<sp/>?<sp/><ref refid="d5/d66/tripal__organism__properties_8tpl_8php_1a011800c63ece4cbbfa77136a20607023" kindref="member">$options</ref>[</highlight><highlight class="stringliteral">&apos;return_html&apos;</highlight><highlight class="normal">]<sp/>:<sp/>FALSE;</highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>human-readable<sp/>severity<sp/>string.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/>$importance_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>($importance)<sp/>{</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1ab6b50101c7d1777273f1280e73ef8697" kindref="member">TRIPAL_CRITICAL</ref>:</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$importance_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;CRITICAL&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a4b04c4b1ce52da710d57abf5c4b09dd3" kindref="member">TRIPAL_ERROR</ref>:</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$importance_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;ERROR&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a179264461824ee52a7a08ebef9150e4b" kindref="member">TRIPAL_WARNING</ref>:</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$importance_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;WARNING&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1ad9759873be1ae0c3d8ccc37d121aeb3c" kindref="member">TRIPAL_NOTICE</ref>:</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$importance_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;NOTICE&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1ae3246842a9b0bc4b8ecf2951cb1a949a" kindref="member">TRIPAL_INFO</ref>:</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$importance_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;INFO&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a4199d13e9eb402a5881442421a0d8099" kindref="member">TRIPAL_DEBUG</ref>:</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$importance_string<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;DEBUG&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="214"><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Mark-up<sp/>the<sp/>Message.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/>$full_message<sp/>=</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&lt;div<sp/>class=&quot;tripal-site-admin-message&quot;&gt;&apos;</highlight><highlight class="normal"><sp/>.</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&lt;span<sp/>class=&quot;tripal-severity-string<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>strtolower($importance_string)<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;&quot;&gt;&apos;</highlight><highlight class="normal"><sp/>.<sp/>$importance_string<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;:<sp/>&lt;/span&gt;&apos;</highlight><highlight class="normal"><sp/>.</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$message<sp/>.</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&lt;/div&gt;&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Handle<sp/>whether<sp/>to<sp/>return<sp/>the<sp/>HTML<sp/>&amp;<sp/>let<sp/>the<sp/>caller<sp/>deal<sp/>with<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>or<sp/>to<sp/>use<sp/>drupal_set_message<sp/>to<sp/>put<sp/>it<sp/>near<sp/>the<sp/>top<sp/>of<sp/>the<sp/>page<sp/><sp/>&amp;<sp/>let<sp/>the<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>theme<sp/>deal<sp/>with<sp/>it.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="d5/d66/tripal__organism__properties_8tpl_8php_1a011800c63ece4cbbfa77136a20607023" kindref="member">$options</ref>[</highlight><highlight class="stringliteral">&apos;return_html&apos;</highlight><highlight class="normal">])<sp/>{</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&lt;div<sp/>class=&quot;messages<sp/>tripal-site-admin-only&quot;&gt;&apos;</highlight><highlight class="normal"><sp/>.<sp/>$full_message<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;&lt;/div&gt;&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/>drupal_set_message($full_message,<sp/></highlight><highlight class="stringliteral">&apos;tripal-site-admin-only&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="231"><highlight class="normal">}</highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight></codeline>
<codeline lineno="253" refid="d9/dae/group__tripal__notify__api_1ga8efe83b992f867af4a09830e67800368" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="d9/dae/group__tripal__notify__api_1ga8efe83b992f867af4a09830e67800368" kindref="member">tripal_log</ref>($message,<sp/>$type<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;error&apos;</highlight><highlight class="normal">,<sp/><ref refid="d5/d66/tripal__organism__properties_8tpl_8php_1a011800c63ece4cbbfa77136a20607023" kindref="member">$options</ref><sp/>=<sp/>array())<sp/>{</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/>global<sp/>$base_url;</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/>$prefix<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;[site<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>$base_url<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;]<sp/>[TRIPAL<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>strtoupper(check_plain($type))<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;]<sp/>&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!isset(<ref refid="d5/d66/tripal__organism__properties_8tpl_8php_1a011800c63ece4cbbfa77136a20607023" kindref="member">$options</ref>[</highlight><highlight class="stringliteral">&apos;is_progress_bar&apos;</highlight><highlight class="normal">]))<sp/>{</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/>$message<sp/>=<sp/>$prefix<sp/>.<sp/>str_replace(</highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">,<sp/>trim($message));</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isset(<ref refid="d5/d66/tripal__organism__properties_8tpl_8php_1a011800c63ece4cbbfa77136a20607023" kindref="member">$options</ref>[</highlight><highlight class="stringliteral">&apos;first_progress_bar&apos;</highlight><highlight class="normal">]))<sp/>{</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/>$message<sp/>=<sp/>$prefix<sp/>.<sp/>trim($message);</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>error_log($message);</highlight></codeline>
<codeline lineno="266"><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="tripal/api/tripal.notice.api.inc"/>
  </compounddef>
</doxygen>
