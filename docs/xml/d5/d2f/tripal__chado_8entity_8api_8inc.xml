<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.15">
  <compounddef id="d5/d2f/tripal__chado_8entity_8api_8inc" kind="file" language="PHP">
    <compoundname>tripal_chado.entity.api.inc</compoundname>
      <sectiondef kind="func">
      <memberdef kind="function" id="dd/d83/group__tripal__chado__entity__api_1gade39580cff59082ed7d9e3774703631a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>chado_get_bundle_entity_table</definition>
        <argsstring>($bundle)</argsstring>
        <name>chado_get_bundle_entity_table</name>
        <param>
          <declname>$bundle</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>A helper function that provides the Chado mapping table for the bundle.</para><para>The tripal_chado module must map entities to their corresponding record in Chado. Each bundl type has their own table for this mapping. This function provides the name of the table given the bundle name. A mapping table will only map to one table in Chado so the record_id&apos;s of the mapping table should always be unique.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$bundle</parametername>
</parameternamelist>
<parameterdescription>
<para>A bundle object (as retrieved from <ref refid="d5/dce/group__tripal__entities__api_1ga5f53c10c88edbd9405697ffd7bca2094" kindref="member">tripal_load_bundle_entity()</ref>.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The name of the mapping table that Chado uses to map entities to records. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal_chado/api/tripal_chado.entity.api.inc" line="118" column="1" bodyfile="tripal_chado/api/tripal_chado.entity.api.inc" bodystart="118" bodyend="123"/>
      </memberdef>
      <memberdef kind="function" id="dd/d83/group__tripal__chado__entity__api_1gaa1b305cc6e85d8781925696b108139c2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>chado_get_record_entity_by_bundle</definition>
        <argsstring>(TripalBundle $bundle, $record_id)</argsstring>
        <name>chado_get_record_entity_by_bundle</name>
        <param>
          <type><ref refid="d4/daf/classTripalBundle" kindref="compound">TripalBundle</ref></type>
          <declname>$bundle</declname>
        </param>
        <param>
          <declname>$record_id</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retreive the entity_id assigned to a given record_id and bundle.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$bundle</parametername>
</parameternamelist>
<parameterdescription>
<para>A bundle object (as retrieved from <ref refid="d5/dce/group__tripal__entities__api_1ga5f53c10c88edbd9405697ffd7bca2094" kindref="member">tripal_load_bundle_entity()</ref>. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$record_id</parametername>
</parameternamelist>
<parameterdescription>
<para>The ID of the record in the Chado table. The record must belong to the table to which the bundle is associated in chado.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The ID of the entity that belongs to the given record_id. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal_chado/api/tripal_chado.entity.api.inc" line="31" column="1" bodyfile="tripal_chado/api/tripal_chado.entity.api.inc" bodystart="31" bodyend="48"/>
      </memberdef>
      <memberdef kind="function" id="dd/d83/group__tripal__chado__entity__api_1ga54767c76790343a2ee1449feb89e80a2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>chado_get_record_entity_by_table</definition>
        <argsstring>($data_table, $record_id)</argsstring>
        <name>chado_get_record_entity_by_table</name>
        <param>
          <declname>$data_table</declname>
        </param>
        <param>
          <declname>$record_id</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retreive the entity_id assigned to a given record_id and base table.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$data_table</parametername>
</parameternamelist>
<parameterdescription>
<para>The name of the Chado base table. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$record_id</parametername>
</parameternamelist>
<parameterdescription>
<para>The ID of the record in the Chado table. The record must belong to the table to which the bundle is associated in chado.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The ID of the entity that belongs to the given record_id, or NULL otherwise. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tripal_chado/api/tripal_chado.entity.api.inc" line="67" column="1" bodyfile="tripal_chado/api/tripal_chado.entity.api.inc" bodystart="67" bodyend="98"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>Provides an application programming interface (API) to manage entities that use Chado as their base data. </para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal">&lt;?php</highlight></codeline>
<codeline lineno="31" refid="dd/d83/group__tripal__chado__entity__api_1gaa1b305cc6e85d8781925696b108139c2" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="dd/d83/group__tripal__chado__entity__api_1gaa1b305cc6e85d8781925696b108139c2" kindref="member">chado_get_record_entity_by_bundle</ref>(<ref refid="d4/daf/classTripalBundle" kindref="compound">TripalBundle</ref><sp/>$bundle,<sp/>$record_id)<sp/>{</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$bundle)<sp/>{</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&apos;Please<sp/>provide<sp/>a<sp/>TripalBundle<sp/>object.&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/>};</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$record_id)<sp/>{</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&apos;Please<sp/>provide<sp/>an<sp/>integer<sp/>record<sp/>ID.&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/>};</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!is_numeric($record_id))<sp/>{</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&apos;Please<sp/>provide<sp/>an<sp/>integer<sp/>record<sp/>ID.<sp/>The<sp/>value<sp/>provided<sp/>was<sp/>&quot;&apos;</highlight><highlight class="normal"><sp/>.<sp/>$record_id<sp/>.<sp/></highlight><highlight class="charliteral">&apos;&quot;&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/>$chado_entity_table<sp/>=<sp/><ref refid="dd/d83/group__tripal__chado__entity__api_1gade39580cff59082ed7d9e3774703631a" kindref="member">chado_get_bundle_entity_table</ref>($bundle);</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>db_select($chado_entity_table,<sp/></highlight><highlight class="stringliteral">&apos;CE&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/>-&gt;fields(</highlight><highlight class="stringliteral">&apos;CE&apos;</highlight><highlight class="normal">,<sp/>array(</highlight><highlight class="stringliteral">&apos;entity_id&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>-&gt;condition(</highlight><highlight class="stringliteral">&apos;CE.record_id&apos;</highlight><highlight class="normal">,<sp/>$record_id)</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/>-&gt;execute()</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/>-&gt;fetchField();</highlight></codeline>
<codeline lineno="48"><highlight class="normal">}</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="67" refid="dd/d83/group__tripal__chado__entity__api_1ga54767c76790343a2ee1449feb89e80a2" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="dd/d83/group__tripal__chado__entity__api_1ga54767c76790343a2ee1449feb89e80a2" kindref="member">chado_get_record_entity_by_table</ref>($data_table,<sp/>$record_id)<sp/>{</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>data<sp/>table<sp/>and<sp/>type_id<sp/>are<sp/>required.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$data_table)<sp/>{</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&apos;Please<sp/>provide<sp/>the<sp/>$data_table<sp/>argument.&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/>};</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$record_id)<sp/>{</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&apos;Please<sp/>provide<sp/>an<sp/>integer<sp/>record<sp/>ID.&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/>};</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!is_numeric($record_id))<sp/>{</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&apos;Please<sp/>provide<sp/>an<sp/>integer<sp/>record<sp/>ID.<sp/>The<sp/>value<sp/>provided<sp/>was<sp/>&quot;&apos;</highlight><highlight class="normal"><sp/>.<sp/>$record_id<sp/>.<sp/></highlight><highlight class="charliteral">&apos;&quot;&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>list<sp/>of<sp/>bundles<sp/>for<sp/>this<sp/>table.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/>$bundles<sp/>=<sp/>db_select(</highlight><highlight class="stringliteral">&apos;chado_bundle&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;CB&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/>-&gt;fields(</highlight><highlight class="stringliteral">&apos;CB&apos;</highlight><highlight class="normal">,<sp/>array(</highlight><highlight class="stringliteral">&apos;bundle_id&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/>-&gt;condition(</highlight><highlight class="stringliteral">&apos;CB.data_table&apos;</highlight><highlight class="normal">,<sp/>$data_table)</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/>-&gt;execute();</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Look<sp/>for<sp/>the<sp/>record<sp/>ID<sp/>in<sp/>the<sp/>appropriate<sp/>chado<sp/>table.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>($bundle_id<sp/>=<sp/>$bundles-&gt;fetchField())<sp/>{</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>$entity_id<sp/>=<sp/>db_select(</highlight><highlight class="stringliteral">&apos;chado_bio_data_&apos;</highlight><highlight class="normal"><sp/>.<sp/>$bundle_id<sp/>,<sp/></highlight><highlight class="stringliteral">&apos;CBD&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;fields(</highlight><highlight class="stringliteral">&apos;CBD&apos;</highlight><highlight class="normal">,<sp/>array(</highlight><highlight class="stringliteral">&apos;entity_id&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;condition(</highlight><highlight class="stringliteral">&apos;record_id&apos;</highlight><highlight class="normal">,<sp/>$record_id)</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;execute()</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;fetchField();</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($entity_id)<sp/>{</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$entity_id;</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="98"><highlight class="normal">}</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="118" refid="dd/d83/group__tripal__chado__entity__api_1gade39580cff59082ed7d9e3774703631a" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="dd/d83/group__tripal__chado__entity__api_1gade39580cff59082ed7d9e3774703631a" kindref="member">chado_get_bundle_entity_table</ref>($bundle)<sp/>{</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$bundle)<sp/>{</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;chado_&apos;</highlight><highlight class="normal"><sp/>.<sp/>$bundle-&gt;name;</highlight></codeline>
<codeline lineno="123"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="tripal_chado/api/tripal_chado.entity.api.inc"/>
  </compounddef>
</doxygen>
