<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.15">
  <compounddef id="d5/d8b/sep____protocol_8inc" kind="file" language="PHP">
    <compoundname>sep__protocol.inc</compoundname>
    <innerclass refid="d2/d4b/classsep____protocol" prot="public">sep__protocol</innerclass>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal">&lt;?php</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="11" refid="d2/d4b/classsep____protocol" refkind="compound"><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="d2/d4b/classsep____protocol" kindref="compound">sep__protocol</ref><sp/></highlight><highlight class="keyword">extends</highlight><highlight class="normal"><sp/><ref refid="d2/d2e/classChadoField" kindref="compound">ChadoField</ref><sp/>{</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>default<sp/>label<sp/>for<sp/>this<sp/>field.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14" refid="d2/d4b/classsep____protocol_1a4a499402284391f2483dee50a5ad70c7" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1a4a499402284391f2483dee50a5ad70c7" kindref="member">$default_label</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&apos;Protocol&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>default<sp/>description<sp/>for<sp/>this<sp/>field.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17" refid="d2/d4b/classsep____protocol_1aa3ed5c7e871f54898fcad0ccafa90e07" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1aa3ed5c7e871f54898fcad0ccafa90e07" kindref="member">$default_description</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&apos;The<sp/>protocol<sp/>followed<sp/>to<sp/>generate<sp/>this<sp/>resource.&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>default<sp/>widget<sp/>for<sp/>this<sp/>field.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20" refid="d2/d4b/classsep____protocol_1a38d0b6eedf2e963e9c3d3d05f8bac37e" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1a38d0b6eedf2e963e9c3d3d05f8bac37e" kindref="member">$default_widget</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&apos;sep__protocol_widget&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>default<sp/>formatter<sp/>for<sp/>this<sp/>field.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23" refid="d2/d4b/classsep____protocol_1aa09e8295489789ec1ffcce356ca5d0f1" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1aa09e8295489789ec1ffcce356ca5d0f1" kindref="member">$default_formatter</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&apos;sep__protocol_formatter&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>module<sp/>that<sp/>manages<sp/>this<sp/>field.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26" refid="d2/d4b/classsep____protocol_1a755742c486070c16928e14ab98d04ae7" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1a755742c486070c16928e14ab98d04ae7" kindref="member">$module</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&apos;tripal_chado&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>A<sp/>list<sp/>of<sp/>global<sp/>settings.<sp/>These<sp/>can<sp/>be<sp/>accessed<sp/>within<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>globalSettingsForm.<sp/><sp/>When<sp/>the<sp/>globalSettingsForm<sp/>is<sp/>submitted<sp/>then</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Drupal<sp/>will<sp/>automatically<sp/>change<sp/>these<sp/>settings<sp/>for<sp/>all<sp/>fields.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Once<sp/>instances<sp/>exist<sp/>for<sp/>a<sp/>field<sp/>type<sp/>then<sp/>these<sp/>settings<sp/>cannot<sp/>be</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>changed.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33" refid="d2/d4b/classsep____protocol_1a6dcc5c9930b8b7151c66aef28643bbe9" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1a6dcc5c9930b8b7151c66aef28643bbe9" kindref="member">$default_settings</ref><sp/>=<sp/>[</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;storage&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;field_chado_storage&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>It<sp/>is<sp/>expected<sp/>that<sp/>all<sp/>fields<sp/>set<sp/>a<sp/>&apos;value&apos;<sp/>in<sp/>the<sp/>load()<sp/>function.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>In<sp/>many<sp/>cases,<sp/>the<sp/>value<sp/>may<sp/>be<sp/>an<sp/>associative<sp/>array<sp/>of<sp/>key/value<sp/>pairs.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>In<sp/>order<sp/>for<sp/>Tripal<sp/>to<sp/>provide<sp/>context<sp/>for<sp/>all<sp/>data,<sp/>the<sp/>keys<sp/>should</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>be<sp/>a<sp/>controlled<sp/>vocabulary<sp/>term<sp/>(e.g.<sp/>rdfs:type).<sp/>Keys<sp/>in<sp/>the<sp/>load()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>function<sp/>that<sp/>are<sp/>supported<sp/>by<sp/>the<sp/>query()<sp/>function<sp/>should<sp/>be</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>listed<sp/>here.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;searchable_keys&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>[],</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/>];</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Provide<sp/>a<sp/>list<sp/>of<sp/>instance<sp/>specific<sp/>settings.<sp/>These<sp/>can<sp/>be<sp/>access<sp/>within</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>instanceSettingsForm.<sp/><sp/>When<sp/>the<sp/>instanceSettingsForm<sp/>is<sp/>submitted</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>then<sp/>Drupal<sp/>with<sp/>automatically<sp/>change<sp/>these<sp/>settings<sp/>for<sp/>the<sp/>instance.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>It<sp/>is<sp/>recommended<sp/>to<sp/>put<sp/>settings<sp/>at<sp/>the<sp/>instance<sp/>level<sp/>whenever<sp/>possible.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>you<sp/>override<sp/>this<sp/>variable<sp/>in<sp/>a<sp/>child<sp/>class<sp/>be<sp/>sure<sp/>to<sp/>replicate<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>term_name,<sp/>term_vocab,<sp/>term_accession<sp/>and<sp/>term_fixed<sp/>keys<sp/>as<sp/>these<sp/>are</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>required<sp/>for<sp/>all<sp/>TripalFields.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51" refid="d2/d4b/classsep____protocol_1aa7ccb1010751564244cd017b080ee4f3" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1aa7ccb1010751564244cd017b080ee4f3" kindref="member">$default_instance_settings</ref><sp/>=<sp/>[</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>DATABASE<sp/>name,<sp/>as<sp/>it<sp/>appears<sp/>in<sp/>chado.db.<sp/><sp/>This<sp/>also<sp/>builds<sp/>the<sp/>link-out<sp/>url.<sp/><sp/>In<sp/>most<sp/>cases<sp/>this<sp/>will<sp/>simply<sp/>be<sp/>the<sp/>CV<sp/>name.<sp/><sp/>In<sp/>some<sp/>cases<sp/>(EDAM)<sp/>this<sp/>will<sp/>be<sp/>the<sp/>SUBONTOLOGY.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;term_vocabulary&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;sep&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>name<sp/>of<sp/>the<sp/>term.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;term_name&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;protocol&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>unique<sp/>ID<sp/>(i.e.<sp/>accession)<sp/>of<sp/>the<sp/>term.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;term_accession&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;00101&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>to<sp/>TRUE<sp/>if<sp/>the<sp/>site<sp/>admin<sp/>is<sp/>not<sp/>allowed<sp/>to<sp/>change<sp/>the<sp/>term</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>type,<sp/>otherwise<sp/>the<sp/>admin<sp/>can<sp/>change<sp/>the<sp/>term<sp/>mapped<sp/>to<sp/>a<sp/>field.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;term_fixed&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>FALSE,</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Indicates<sp/>if<sp/>this<sp/>field<sp/>should<sp/>be<sp/>automatically<sp/>attached<sp/>to<sp/>display</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>or<sp/>web<sp/>services<sp/>or<sp/>if<sp/>this<sp/>field<sp/>should<sp/>be<sp/>loaded<sp/>separately.<sp/>This</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>is<sp/>convenient<sp/>for<sp/>speed.<sp/><sp/>Fields<sp/>that<sp/>are<sp/>slow<sp/>should<sp/>for<sp/>loading</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>should<sp/>have<sp/>auto_attach<sp/>set<sp/>to<sp/>FALSE<sp/>so<sp/>tha<sp/>their<sp/>values<sp/>can<sp/>be</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>attached<sp/>asynchronously.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;auto_attach&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>FALSE,</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/>];</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>A<sp/>boolean<sp/>specifying<sp/>that<sp/>users<sp/>should<sp/>not<sp/>be<sp/>allowed<sp/>to<sp/>create</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>fields<sp/>and<sp/>instances<sp/>of<sp/>this<sp/>field<sp/>type<sp/>through<sp/>the<sp/>UI.<sp/>Such</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>fields<sp/>can<sp/>only<sp/>be<sp/>created<sp/>programmatically<sp/>with<sp/>field_create_field()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>field_create_instance().</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73" refid="d2/d4b/classsep____protocol_1a59f5709517b7e7b7a84e56b2ba3f4ce9" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1a59f5709517b7e7b7a84e56b2ba3f4ce9" kindref="member">$no_ui</ref><sp/>=<sp/>FALSE;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>A<sp/>boolean<sp/>specifying<sp/>that<sp/>the<sp/>field<sp/>will<sp/>not<sp/>contain<sp/>any<sp/>data.<sp/>This</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>should<sp/>exclude<sp/>the<sp/>field<sp/>from<sp/>web<sp/>services<sp/>or<sp/>downloads.<sp/><sp/>An<sp/>example</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>could<sp/>be<sp/>a<sp/>quick<sp/>search<sp/>field<sp/>that<sp/>appears<sp/>on<sp/>the<sp/>page<sp/>that<sp/>redirects</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>user<sp/>but<sp/>otherwise<sp/>provides<sp/>no<sp/>data.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79" refid="d2/d4b/classsep____protocol_1a49af8c2c9641924cc7fef4561412cb8b" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1a49af8c2c9641924cc7fef4561412cb8b" kindref="member">$no_data</ref><sp/>=<sp/>FALSE;</highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="108" refid="d2/d4b/classsep____protocol_1a921341a3970879a724f0443eb1165251" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1a921341a3970879a724f0443eb1165251" kindref="member">load</ref>($entity)<sp/>{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/>parent::load($entity);</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="d5/d5b/tripal__library__base_8tpl_8php_1acbcb6dcb11c8755d5ffab0b45aac7a22" kindref="member">$record</ref><sp/>=<sp/>$entity-&gt;chado_record;</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>$settings<sp/>=<sp/>$this-&gt;instance[</highlight><highlight class="stringliteral">&apos;settings&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/>$field_name<sp/>=<sp/>$this-&gt;field[</highlight><highlight class="stringliteral">&apos;field_name&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/>$field_type<sp/>=<sp/>$this-&gt;field[</highlight><highlight class="stringliteral">&apos;type&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/>$field_table<sp/>=<sp/>$this-&gt;instance[</highlight><highlight class="stringliteral">&apos;settings&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;chado_table&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/>$field_column<sp/>=<sp/>$this-&gt;instance[</highlight><highlight class="stringliteral">&apos;settings&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;chado_column&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/>$base_table<sp/>=<sp/>$this-&gt;instance[</highlight><highlight class="stringliteral">&apos;settings&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;base_table&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/>$linker_field<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;chado-&apos;</highlight><highlight class="normal"><sp/>.<sp/>$field_table<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;__&apos;</highlight><highlight class="normal"><sp/>.<sp/>$field_column;</highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="d5/d5b/tripal__library__base_8tpl_8php_1acbcb6dcb11c8755d5ffab0b45aac7a22" kindref="member">$record</ref>)<sp/>{</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/>$protocol<sp/>=<sp/><ref refid="d5/d5b/tripal__library__base_8tpl_8php_1acbcb6dcb11c8755d5ffab0b45aac7a22" kindref="member">$record</ref>-&gt;{$field_column};</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>this<sp/>record<sp/>does<sp/>not<sp/>have<sp/>a<sp/>protcol<sp/>then<sp/>just<sp/>return.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$protocol)<sp/>{</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>some<sp/>defaults<sp/>for<sp/>the<sp/>empty<sp/>record.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/>$entity-&gt;{$field_name}[</highlight><highlight class="stringliteral">&apos;und&apos;</highlight><highlight class="normal">][0]<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;value&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>[],</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/>];</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>$entity_id<sp/>=<sp/><ref refid="d5/d5b/tripal__library__base_8tpl_8php_1acbcb6dcb11c8755d5ffab0b45aac7a22" kindref="member">$record</ref>-&gt;entity_id;</highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>Protocol<sp/>controlled<sp/>vocabulary<sp/>terms.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/>$protocol_name_term<sp/>=<sp/><ref refid="dd/dc9/group__tripal__chado__semweb__api_1gae4d00bef6ae53acb91c2c021eef279a9" kindref="member">chado_get_semweb_term</ref>(</highlight><highlight class="stringliteral">&apos;protocol&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/>$protocol_type_term<sp/>=<sp/><ref refid="dd/dc9/group__tripal__chado__semweb__api_1gae4d00bef6ae53acb91c2c021eef279a9" kindref="member">chado_get_semweb_term</ref>(</highlight><highlight class="stringliteral">&apos;protocol&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;type_id&apos;</highlight><highlight class="normal">);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/>$entity-&gt;{$field_name}[</highlight><highlight class="stringliteral">&apos;und&apos;</highlight><highlight class="normal">][0][</highlight><highlight class="stringliteral">&apos;value&apos;</highlight><highlight class="normal">]<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$protocol_name_term<sp/>=&gt;<sp/>$protocol-&gt;name,</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$protocol_type_term<sp/>=&gt;<sp/>$protocol-&gt;type_id-&gt;name,</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/>];</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/>$entity-&gt;{$field_name}[</highlight><highlight class="stringliteral">&apos;und&apos;</highlight><highlight class="normal">][0][$linker_field]<sp/>=<sp/><sp/>$protocol-&gt;protocol_id;</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Is<sp/>there<sp/>a<sp/>published<sp/>entity<sp/>for<sp/>this<sp/>protocol?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(property_exists(<ref refid="d5/d5b/tripal__library__base_8tpl_8php_1acbcb6dcb11c8755d5ffab0b45aac7a22" kindref="member">$record</ref>-&gt;{$field_column},<sp/></highlight><highlight class="stringliteral">&apos;entity_id&apos;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$entity-&gt;{$field_name}[</highlight><highlight class="stringliteral">&apos;und&apos;</highlight><highlight class="normal">][0][</highlight><highlight class="stringliteral">&apos;value&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;entity_id&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;TripalEntity:&apos;</highlight><highlight class="normal"><sp/>.<sp/><ref refid="d5/d5b/tripal__library__base_8tpl_8php_1acbcb6dcb11c8755d5ffab0b45aac7a22" kindref="member">$record</ref>-&gt;{$field_column}-&gt;entity_id;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight></codeline>
<codeline lineno="157" refid="d2/d4b/classsep____protocol_1ae61c8edcd803343596df8859a9c7ca7b" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1ae61c8edcd803343596df8859a9c7ca7b" kindref="member">elementInfo</ref>()<sp/>{</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/>$field_term<sp/>=<sp/>$this-&gt;getFieldTermID();</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>$type_id_term<sp/>=<sp/><ref refid="da/ddd/group__tripal__chado__DEPRECATED__api_1ga70d982bbd9de379797877450fb5218f1" kindref="member">tripal_get_chado_semweb_term</ref>(</highlight><highlight class="stringliteral">&apos;protocol&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;type_id&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$field_term<sp/>=&gt;<sp/>[</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;operations&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>[</highlight><highlight class="stringliteral">&apos;eq&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;contains&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;starts&apos;</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;sortable&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>TRUE,</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;searchable&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>TRUE,</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;readonly&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>FALSE,</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;xs:complexType&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;elements&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>[</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;rdfs:label&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>[</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;searchable&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>TRUE,</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;protocol_name&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;operations&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>[</highlight><highlight class="stringliteral">&apos;eq&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;ne&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;contains&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;starts&apos;</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;sortable&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>FALSE,</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;xs:string&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;readonly&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>TRUE,</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;required&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>FALSE,</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>],</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;entity&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>[</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;searchable&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>FALSE,</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>],</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$type_id_term<sp/>=&gt;<sp/>[</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;searchable&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>TRUE,</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;protocol_type&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;operations&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>[</highlight><highlight class="stringliteral">&apos;eq&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;ne&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;contains&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;starts&apos;</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;sortable&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>TRUE,</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;readonly&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>FALSE,</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;required&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>TRUE,</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;type&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;xs:integer&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>],</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>],</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>],</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/>];</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="201" refid="d2/d4b/classsep____protocol_1a63749fd2f2e6355924d1095dcb25fcfe" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1a63749fd2f2e6355924d1095dcb25fcfe" kindref="member">query</ref>($query,<sp/>$condition)<sp/>{</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/>$alias<sp/>=<sp/>$this-&gt;field[</highlight><highlight class="stringliteral">&apos;field_name&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/>$operator<sp/>=<sp/>$condition[</highlight><highlight class="stringliteral">&apos;operator&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/>$field_term_id<sp/>=<sp/>$this-&gt;getFieldTermID();</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/>$type_id_term<sp/>=<sp/>$field_term_id<sp/>.<sp/></highlight><highlight class="charliteral">&apos;,&apos;</highlight><highlight class="normal"><sp/>.<sp/><ref refid="da/ddd/group__tripal__chado__DEPRECATED__api_1ga70d982bbd9de379797877450fb5218f1" kindref="member">tripal_get_chado_semweb_term</ref>(</highlight><highlight class="stringliteral">&apos;protocol&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;type_id&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Join<sp/>to<sp/>the<sp/>protocol<sp/>table<sp/>for<sp/>this<sp/>field.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;queryJoinOnce($query,<sp/></highlight><highlight class="stringliteral">&apos;protocol&apos;</highlight><highlight class="normal">,<sp/>$alias,<sp/></highlight><highlight class="stringliteral">&quot;base.protocol_id<sp/>=<sp/>$alias.protocol_id&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($condition[</highlight><highlight class="stringliteral">&apos;column&apos;</highlight><highlight class="normal">]<sp/>==<sp/>$field_term_id<sp/>or</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$condition[</highlight><highlight class="stringliteral">&apos;column&apos;</highlight><highlight class="normal">]<sp/>==<sp/>$field_term_id<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;,rdfs:label&apos;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$query-&gt;condition(</highlight><highlight class="stringliteral">&quot;$alias.name&quot;</highlight><highlight class="normal">,<sp/>$condition[</highlight><highlight class="stringliteral">&apos;value&apos;</highlight><highlight class="normal">],<sp/>$operator);</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($condition[</highlight><highlight class="stringliteral">&apos;column&apos;</highlight><highlight class="normal">]<sp/>==<sp/>$type_id_term)<sp/>{</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$this-&gt;queryJoinOnce($query,<sp/></highlight><highlight class="stringliteral">&apos;cvterm&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;CVT&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;base.type_id<sp/>=<sp/>CVT.cvterm_id&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$query-&gt;condition(</highlight><highlight class="stringliteral">&quot;CVT.name&quot;</highlight><highlight class="normal">,<sp/>$condition[</highlight><highlight class="stringliteral">&apos;value&apos;</highlight><highlight class="normal">],<sp/>$operator);</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="221" refid="d2/d4b/classsep____protocol_1ae1fbd9d0b6fccf6625a755de84c76425" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="d2/d4b/classsep____protocol_1ae1fbd9d0b6fccf6625a755de84c76425" kindref="member">queryOrder</ref>($query,<sp/>$order)<sp/>{</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/>$alias<sp/>=<sp/>$this-&gt;field[</highlight><highlight class="stringliteral">&apos;field_name&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/>$field_term_id<sp/>=<sp/>$this-&gt;getFieldTermID();</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/>$type_id_term<sp/>=<sp/><ref refid="da/ddd/group__tripal__chado__DEPRECATED__api_1ga70d982bbd9de379797877450fb5218f1" kindref="member">tripal_get_chado_semweb_term</ref>(</highlight><highlight class="stringliteral">&apos;protocol&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;type_id&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Join<sp/>to<sp/>the<sp/>protocol<sp/>table<sp/>for<sp/>this<sp/>field.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;queryJoinOnce($query,<sp/></highlight><highlight class="stringliteral">&apos;protocol&apos;</highlight><highlight class="normal">,<sp/>$alias,<sp/></highlight><highlight class="stringliteral">&quot;base.protocol_id<sp/>=<sp/>$alias.organism_id&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($order[</highlight><highlight class="stringliteral">&apos;column&apos;</highlight><highlight class="normal">]<sp/>==<sp/>$type_id_term)<sp/>{</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!in_array(</highlight><highlight class="stringliteral">&apos;CVT&apos;</highlight><highlight class="normal">,<sp/>$joins))<sp/>{</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$this-&gt;queryJoinOnce($query,<sp/></highlight><highlight class="stringliteral">&apos;cvterm&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;CVT&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;base.type_id<sp/>=<sp/>CVT.cvterm_id&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$query-&gt;orderBy(</highlight><highlight class="stringliteral">&quot;CVT.name&quot;</highlight><highlight class="normal">,<sp/>$order[</highlight><highlight class="stringliteral">&apos;direction&apos;</highlight><highlight class="normal">]);</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="tripal_chado/includes/TripalFields/sep__protocol/sep__protocol.inc"/>
  </compounddef>
</doxygen>
