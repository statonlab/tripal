<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.15">
  <compounddef id="da/dc4/tripal__core_8tripal__variables_8api_8inc" kind="file" language="PHP">
    <compoundname>tripal_core.tripal_variables.api.inc</compoundname>
      <sectiondef kind="func">
      <memberdef kind="function" id="da/dc4/tripal__core_8tripal__variables_8api_8inc_1a46b4171d4b97378c1584276b89719b8a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_add_node_variable</definition>
        <argsstring>($nid, $name, $value, $rank=0)</argsstring>
        <name>tripal_add_node_variable</name>
        <param>
          <declname>$nid</declname>
        </param>
        <param>
          <declname>$name</declname>
        </param>
        <param>
          <declname>$value</declname>
        </param>
        <param>
          <declname>$rank</declname>
          <defval>0</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Associates a variable and it&apos;s value to a node.</para><para>If a variable is already associated more with a node then the rank value is used to differentiate them. By default the rank is set to 0 and can be manually set by using the $rank argument. But, if left unspecified the next available rank will automatically be used.</para><para>If the variable does not exist then it will be added automatically to prevent errors. However, modules developers should always add their variables first before using. If the variable already exists then it will simply be re-used.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$nid</parametername>
</parameternamelist>
<parameterdescription>
<para>The node ID. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$name</parametername>
</parameternamelist>
<parameterdescription>
<para>The name of the variable to associated with the node. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$value</parametername>
</parameternamelist>
<parameterdescription>
<para>The value of the variable. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$rank</parametername>
</parameternamelist>
<parameterdescription>
<para>The rank of the value. Default to zero.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>TRUE|FALSE Returns TRUE if the variable was associated with the node and false if a failure occured. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="legacy/tripal_core/api/tripal_core.tripal_variables.api.inc" line="29" column="1" bodyfile="legacy/tripal_core/api/tripal_core.tripal_variables.api.inc" bodystart="29" bodyend="72"/>
      </memberdef>
      <memberdef kind="function" id="da/dc4/tripal__core_8tripal__variables_8api_8inc_1ab317097fa48060776e2302f540dd7f5d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_delete_node_variables</definition>
        <argsstring>($nid, $name=&apos;&apos;, $rank=&apos;&apos;)</argsstring>
        <name>tripal_delete_node_variables</name>
        <param>
          <declname>$nid</declname>
        </param>
        <param>
          <declname>$name</declname>
          <defval>&apos;&apos;</defval>
        </param>
        <param>
          <declname>$rank</declname>
          <defval>&apos;&apos;</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Removes variables assigned to a node.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$nid</parametername>
</parameternamelist>
<parameterdescription>
<para>The node ID </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$name</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional. The name of the variable. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$rank</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional. The rank of the variable to retreive.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Return TRUE if deletion is successful, FALSE otherwise. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="legacy/tripal_core/api/tripal_core.tripal_variables.api.inc" line="127" column="1" bodyfile="legacy/tripal_core/api/tripal_core.tripal_variables.api.inc" bodystart="127" bodyend="142"/>
      </memberdef>
      <memberdef kind="function" id="da/dc4/tripal__core_8tripal__variables_8api_8inc_1a25cb1d0048e005b7a31fddbb58d1f133" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>tripal_get_node_variables</definition>
        <argsstring>($nid, $name=&apos;&apos;, $rank=&apos;&apos;)</argsstring>
        <name>tripal_get_node_variables</name>
        <param>
          <declname>$nid</declname>
        </param>
        <param>
          <declname>$name</declname>
          <defval>&apos;&apos;</defval>
        </param>
        <param>
          <declname>$rank</declname>
          <defval>&apos;&apos;</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns one or more variables assigned to a node.</para><para>An array is returned containing an object for each variable assigned to a term that matches the criteria. If a name and rank are provided then the variables returned must match.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>$nid</parametername>
</parameternamelist>
<parameterdescription>
<para>The node ID </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$name</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional. The name of the variable. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>$rank</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional. The rank of the variable to retreive. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>An array of variable objects. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="legacy/tripal_core/api/tripal_core.tripal_variables.api.inc" line="90" column="1" bodyfile="legacy/tripal_core/api/tripal_core.tripal_variables.api.inc" bodystart="90" bodyend="112"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal">&lt;?php</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="29" refid="da/dc4/tripal__core_8tripal__variables_8api_8inc_1a46b4171d4b97378c1584276b89719b8a" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="da/dc4/tripal__core_8tripal__variables_8api_8inc_1a46b4171d4b97378c1584276b89719b8a" kindref="member">tripal_add_node_variable</ref>($nid,<sp/>$name,<sp/>$value,<sp/>$rank<sp/>=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>sure<sp/>the<sp/>variable<sp/>exists.<sp/>To<sp/>prevent<sp/>unwanted<sp/>errors<sp/>from</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>umet<sp/>dependencies<sp/>(e.g.<sp/>modules<sp/>using<sp/>other<sp/>modules&apos;<sp/>variables)<sp/>the<sp/>variable</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>will<sp/>be<sp/>created<sp/>automatically<sp/>if<sp/>it<sp/>is<sp/>missing.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/>$variable<sp/>=<sp/><ref refid="d9/da9/group__tripal__variables__api_1ga377e23d9ee9f48da4394389fa3d6404b" kindref="member">tripal_get_variable</ref>($name);</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$variable)<sp/>{</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/>$variable<sp/>=<sp/><ref refid="d9/da9/group__tripal__variables__api_1ga5e75a5502190885c06fa72cc55545383" kindref="member">tripal_insert_variable</ref>($name,<sp/></highlight><highlight class="stringliteral">&quot;Added<sp/>automatically.<sp/>Please<sp/>describe<sp/>this<sp/>variable.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Is<sp/>the<sp/>variable<sp/>already<sp/>associated<sp/>with<sp/>this<sp/>node?<sp/>If<sp/>so,<sp/>then<sp/>find<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>next<sp/>avilable<sp/>rank.<sp/>If<sp/>the<sp/>$update_existing<sp/>variable<sp/>is<sp/>true<sp/>then<sp/>just</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>update<sp/>the<sp/>record.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><ref refid="dd/d72/tripal__library__features_8tpl_8php_1affc45c6ace2eeb3f300b054dbf9592b6" kindref="member">$values</ref><sp/>=<sp/><ref refid="da/dc4/tripal__core_8tripal__variables_8api_8inc_1a25cb1d0048e005b7a31fddbb58d1f133" kindref="member">tripal_get_node_variables</ref>($nid,<sp/>$name);</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(count(<ref refid="dd/d72/tripal__library__features_8tpl_8php_1affc45c6ace2eeb3f300b054dbf9592b6" kindref="member">$values</ref>)<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>max<sp/>rank<sp/>and<sp/>increment<sp/>the<sp/>rank<sp/>to<sp/>the<sp/>next<sp/>highest<sp/>value.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>$max_rank<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal"><sp/>(<ref refid="dd/d72/tripal__library__features_8tpl_8php_1affc45c6ace2eeb3f300b054dbf9592b6" kindref="member">$values</ref><sp/>as<sp/>$value)<sp/>{</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>the<sp/>user<sp/>has<sp/>specified<sp/>a<sp/>rank<sp/>then<sp/>we<sp/>want<sp/>ot<sp/>honor<sp/>that.<sp/>If<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>rank<sp/>is<sp/>already<sp/>used<sp/>then<sp/>don&apos;t<sp/>continue.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($rank<sp/>&gt;<sp/>0<sp/>and<sp/>$rank<sp/>==<sp/>$value-&gt;rank)<sp/>{</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="d9/dae/group__tripal__notify__api_1ga2240e326e18c3074843ac815e4629ee2" kindref="member">tripal_report_error</ref>(</highlight><highlight class="stringliteral">&apos;tripal_core&apos;</highlight><highlight class="normal">,<sp/><ref refid="dd/d45/tripal_8notice_8api_8inc_1a4b04c4b1ce52da710d57abf5c4b09dd3" kindref="member">TRIPAL_ERROR</ref>,</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;The<sp/>rank<sp/>for<sp/>the<sp/>term,<sp/>&apos;$term&apos;,<sp/>is<sp/>already<sp/>used<sp/>for<sp/>node<sp/>$nid.<sp/>&quot;</highlight><highlight class="normal"><sp/>.</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Cannot<sp/>add<sp/>the<sp/>variable.&quot;</highlight><highlight class="normal">,<sp/>array());</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>FALSE;</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($value-&gt;rank<sp/>&gt;<sp/>$max_rank)<sp/>{</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$max_rank<sp/>=<sp/>$value-&gt;rank;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/>$rank<sp/>=<sp/>$max_rank++;</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Add<sp/>the<sp/>new<sp/>variable.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/>$node_variable_id<sp/>=<sp/>db_insert(</highlight><highlight class="stringliteral">&apos;tripal_node_variables&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/>-&gt;fields(array(</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;variable_id&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$variable-&gt;variable_id,</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;nid&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$nid,</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;value&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$value,</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;rank&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$rank</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>))</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>-&gt;execute();</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$node_variable_id;</highlight></codeline>
<codeline lineno="72"><highlight class="normal">}</highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="90" refid="da/dc4/tripal__core_8tripal__variables_8api_8inc_1a25cb1d0048e005b7a31fddbb58d1f133" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="da/dc4/tripal__core_8tripal__variables_8api_8inc_1a25cb1d0048e005b7a31fddbb58d1f133" kindref="member">tripal_get_node_variables</ref>($nid,<sp/>$name<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>$rank<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/>$variables<sp/>=<sp/>array();</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$nid)<sp/>{</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$variables;</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/>$query<sp/>=<sp/>db_select(</highlight><highlight class="stringliteral">&apos;tripal_node_variables&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;tnv&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/>-&gt;fields(</highlight><highlight class="stringliteral">&apos;tnv&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/>-&gt;condition(</highlight><highlight class="stringliteral">&apos;nid&apos;</highlight><highlight class="normal">,<sp/>$nid,<sp/></highlight><highlight class="charliteral">&apos;=&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($name)<sp/>{</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/>$variable<sp/>=<sp/><ref refid="d9/da9/group__tripal__variables__api_1ga377e23d9ee9f48da4394389fa3d6404b" kindref="member">tripal_get_variable</ref>($name);</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/>$query-&gt;condition(</highlight><highlight class="stringliteral">&apos;variable_id&apos;</highlight><highlight class="normal">,<sp/>$variable-&gt;variable_id,<sp/></highlight><highlight class="charliteral">&apos;=&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($rank)<sp/>{</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/>$query-&gt;condition(</highlight><highlight class="stringliteral">&apos;rank&apos;</highlight><highlight class="normal">,<sp/>$rank,<sp/></highlight><highlight class="charliteral">&apos;=&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><ref refid="dd/d72/tripal__library__features_8tpl_8php_1a233d12bd8b6d3453e9a7a3f0b8c31db2" kindref="member">$results</ref><sp/>=<sp/>$query-&gt;execute();</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Build<sp/>the<sp/><sp/>variables<sp/>array<sp/>and<sp/>return<sp/>it.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">($variable<sp/>=<sp/><ref refid="dd/d72/tripal__library__features_8tpl_8php_1a233d12bd8b6d3453e9a7a3f0b8c31db2" kindref="member">$results</ref>-&gt;fetchObject())<sp/>{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/>$variables[]<sp/>=<sp/>$variable;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$variables;</highlight></codeline>
<codeline lineno="112"><highlight class="normal">}</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="127" refid="da/dc4/tripal__core_8tripal__variables_8api_8inc_1ab317097fa48060776e2302f540dd7f5d" refkind="member"><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="da/dc4/tripal__core_8tripal__variables_8api_8inc_1ab317097fa48060776e2302f540dd7f5d" kindref="member">tripal_delete_node_variables</ref>($nid,<sp/>$name<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>$rank<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$nid)<sp/>{</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>FALSE;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/>$query<sp/>=<sp/>db_delete(</highlight><highlight class="stringliteral">&apos;tripal_node_variables&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/>-&gt;condition(</highlight><highlight class="stringliteral">&apos;nid&apos;</highlight><highlight class="normal">,<sp/>$nid,<sp/></highlight><highlight class="charliteral">&apos;=&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($name)<sp/>{</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>$variable<sp/>=<sp/><ref refid="d9/da9/group__tripal__variables__api_1ga377e23d9ee9f48da4394389fa3d6404b" kindref="member">tripal_get_variable</ref>($name);</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/>$query-&gt;condition(</highlight><highlight class="stringliteral">&apos;variable_id&apos;</highlight><highlight class="normal">,<sp/>$variable-&gt;variable_id,<sp/></highlight><highlight class="charliteral">&apos;=&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($rank)<sp/>{</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/>$query-&gt;condition(</highlight><highlight class="stringliteral">&apos;rank&apos;</highlight><highlight class="normal">,<sp/>$rank,<sp/></highlight><highlight class="charliteral">&apos;=&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$query-&gt;execute();</highlight></codeline>
<codeline lineno="142"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="legacy/tripal_core/api/tripal_core.tripal_variables.api.inc"/>
  </compounddef>
</doxygen>
